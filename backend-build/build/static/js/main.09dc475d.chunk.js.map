{"version":3,"sources":["actions/types.tsx","browserHistory.tsx","windowDimensions.tsx","constants.ts","components/FeaturedCarousel.tsx","components/SpecialOfferCarousel.tsx","components/CommunityCarousel.tsx","reducers/authReducer.tsx","reducers/gamesReducer.tsx","reducers/discountedGamesReducer.tsx","reducers/gameInfoReducer.tsx","reducers/errorReducer.tsx","reducers/gameInfoReviewsReducer.tsx","reducers/profileReducer.tsx","reducers/index.tsx","Root.tsx","actions/axiosConfig.tsx","actions/auth.tsx","actions/games.tsx","components/Loading.tsx","components/Searchbar.tsx","useComponentVisible.tsx","components/CartAndSearchbar.tsx","components/Home.tsx","components/Header.tsx","components/GameInfoCarousel.tsx","components/WriteReview.tsx","img/defaultAvatar.png","components/EditReview.tsx","components/GameInfo.tsx","components/Cart.tsx","components/RegisterForm.tsx","components/Register.tsx","components/SignInForm.tsx","img/joinPc.png","components/SignIn.tsx","components/EditProfileForm.tsx","components/requireAuth.tsx","components/Profile.tsx","actions/profile.tsx","components/Search.tsx","components/Routes.tsx","components/App.tsx","index.tsx"],"names":["ActionTypes","createBrowserHistory","getWindowDimensions","window","width","innerWidth","height","innerHeight","useWindowDimensions","useState","windowDimensions","setWindowDimensions","useEffect","handleResize","addEventListener","removeEventListener","SERVER_ERROR_MESSAGE","ACCESS_TOKEN","LG_SCREEN_SIZE","FeaturedCarousel","props","displayImage","setDisplayImage","autoPlay","setAutoPlay","renderPrice","content","parseFloat","discount_percentage","className","price","toFixed","price_after_discount","renderScreenshotsForGame","gameId","gameForSlide","_","filter","game_id","length","screenshots","map","screenshot","index","src","onMouseEnter","e","onMouseLeave","alt","naturalSlideWidth","naturalSlideHeight","totalSlides","visibleSlides","infinite","step","isPlaying","interval","onClick","history","push","onLoad","anime","targets","opacity","value","duration","easing","cover_url","title","SpecialOfferCarousel","specialofferContent","chunk","contents","videosFromSteam","CommunityCarousel","style","setStyle","playsInline","muted","loop","type","about","AUTH_STATE","authenticated","errorMessage","authReducer","state","action","AUTH_USER","payload","token","AUTH_ERROR","gamesReducer","FETCH_GAMES","FETCH_GAMES_BY_KEYWORD","data","FETCH_GAMES_DISCOUNTED","GameInfoReducer","FETCH_GAME_INFO","erorrReducer","GAME_ERROR","gameInfoReviewsReducer","FETCH_GAME_INFO_REVIEWS","POST_REVIEW","EDIT_REVIEW","DELETE_REVIEW","ProfileReducer","FETCH_PROFILE","EDIT_PROFILE","combineReducers","authStatus","games","gamesBaseInfoReducer","discountedGames","discountedGamesReducer","gameInfo","gameInfoReducer","gameInfoReviews","profile","profileReducer","errors","errorReducer","form","formReducer","store","createStore","reducers","Cookies","get","composeWithDevTools","applyMiddleware","reduxThunk","provider","initialState","children","axiosConfig","axios","create","withCredentials","interceptors","request","use","config","headers","error","Promise","reject","response","originalRequest","status","_retry","post","then","res","dispatch","validateToken","url","catch","signOut","a","auth","alert","path","retriedCalling","fetchGames","fetchDiscountedGames","fetchGamesByKeyword","queryPath","Loading","color","timeout","connect","initialIsVisible","isComponentVisible","setIsComponentVisible","ref","useRef","handleClickOutside","event","current","contains","target","document","useComponentVisible","searchBarInputRef","searchTerm","setSearchTerm","dataSet","delayDebounceFn","setTimeout","fetchMyAPI","clearTimeout","Fragment","autoFocus","data-testid","placeholder","name","onChange","onKeyDown","key","preventDefault","autoComplete","game","renderSearchPreview","CartAndSearchbar","localCart","localStorage","getItem","JSON","parse","hoverData","setHoverData","specialsTabClicked","setSpecialsTabClicked","renderGenresForGameText","filteredContent","genres","genre","renderGenresForGameTag","renderChartGames","contentToRender","onMouseOver","renderChartGamePreview","specialTabsHoverData","carouselSplit","pathname","search","renderContent","GameInfoCarousel","imageClicked","setImageClicked","renderError","touched","renderTextArea","input","label","meta","placeHolder","reduxForm","validate","formValues","opinion","onSubmit","handleSubmit","Field","component","recommend","onRecommendorNot","enableReinitialize","onDelete","fetchGameInfo","fetchGameInfoReviews","postReview","editReview","patch","deleteReview","delete","cart","setCart","parsedLocalCart","itemEls","Array","match","params","email","jwt_decode","subject","reviews","setRecommend","renderWriteReview","onSubmitPostReview","renderEditReview","onSubmitEditReview","onSubmitDeleteReview","initialValues","renderThumbIconForReview","recommendObj","updatedObj","Object","assign","scrollIntoView","behavior","editedReviewIndex","findIndex","moment","release_date","format","item","cartCopy","find","cartItem","stringCart","stringify","setItem","addItem","review","element","avatar_url","defaultAvatar","onError","username","Cart","cartString","removeItem","reduce","acc","curr","console","log","clear","renderTextInput","renderPasswordInput","password","signUp","onSubmitRegister","signIn","onSubmitSignIn","joinPc","renderAutoFocusTextInput","renderFieldSectionLayout","useLocation","openFileExplorer","listingImage","setListingImage","cloudinaryImage","setCloudinaryImage","renderImageUpload","optionValues","accept","display","renderImageUploadPreview","click","renderImage","backgroundImage","backgroundPosition","backgroundSize","backgroundColor","withRef","URL","createObjectURL","files","change","hoc","ChildComponent","ComposedComponent","this","shouldNavigateAway","location","Component","fetchProfile","editProfile","cloudinaryPublicId","existingCloudinaryImagePath","cloudinaryImagePath","image","FileList","formData","FormData","append","put","imagePathResponse","keys","requireAuth","onSubmitEditProfile","split","pop","imagePreview","queryValues","queryString","q","undefined","specials","Routes","exact","Home","GameInfo","SignIn","Register","Profile","Search","App","listen","scrollTo","ReactDOM","render","StrictMode","Root","getElementById"],"mappings":"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","file":"static/js/main.09dc475d.chunk.js","sourcesContent":["import { AuthUserAction, AuthErrorAction } from \"../actions\";\r\n\r\nexport enum ActionTypes {\r\n    AUTH_USER,\r\n    AUTH_ERROR,\r\n    FETCH_GAMES,\r\n    FETCH_GAMES_DISCOUNTED,\r\n    FETCH_GAME_INFO,\r\n    FETCH_GAME_INFO_REVIEWS,\r\n    POST_REVIEW,\r\n    EDIT_REVIEW,\r\n    DELETE_REVIEW,\r\n    FETCH_PROFILE,\r\n    EDIT_PROFILE,\r\n    FETCH_GAMES_BY_KEYWORD,\r\n    ADD_TO_CART,\r\n    GAME_ERROR,\r\n}\r\nexport type AuthActions = AuthUserAction | AuthErrorAction;\r\n","import { createBrowserHistory } from \"history\";\r\nexport default createBrowserHistory();\r\n","import React from \"react\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\n\r\nconst getWindowDimensions = () => {\r\n    const { innerWidth: width, innerHeight: height } = window;\r\n    return {\r\n        width,\r\n        height,\r\n    };\r\n};\r\n\r\nconst useWindowDimensions = () => {\r\n    const [windowDimensions, setWindowDimensions] = useState(\r\n        getWindowDimensions()\r\n    );\r\n\r\n    useEffect(() => {\r\n        function handleResize() {\r\n            setWindowDimensions(getWindowDimensions());\r\n        }\r\n\r\n        window.addEventListener(\"resize\", handleResize);\r\n        return () => window.removeEventListener(\"resize\", handleResize);\r\n    }, []);\r\n\r\n    return windowDimensions;\r\n};\r\nexport default useWindowDimensions;\r\n","export const SERVER_ERROR_MESSAGE =\r\n    \"Uh oh...something went wrong. Check your internet connection and try again.\";\r\nexport const ACCESS_TOKEN = \"ACCESS_TOKEN\";\r\nexport const SM_SCREEN_SIZE = 520;\r\nexport const MED_SCREEN_SIZE = 768;\r\nexport const LG_SCREEN_SIZE = 992;\r\nexport const XL_SCREEN_SIZE = 1200;\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport {\r\n    CarouselProvider,\r\n    Slider,\r\n    Slide,\r\n    DotGroup,\r\n    ButtonBack,\r\n    ButtonNext,\r\n} from \"pure-react-carousel\";\r\nimport \"pure-react-carousel/dist/react-carousel.es.css\";\r\nimport { RiArrowRightSLine, RiArrowLeftSLine } from \"react-icons/ri\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport history from \"../browserHistory\";\r\nimport useWindowDimensions from \"../windowDimensions\";\r\nimport { FeaturedCarouselProps } from \"./Home\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport { LG_SCREEN_SIZE, MED_SCREEN_SIZE } from \"../constants\";\r\nimport { Game } from \"../actions\";\r\nimport _ from \"lodash\";\r\n\r\nconst FeaturedCarousel: React.FC<FeaturedCarouselProps> = (props) => {\r\n    const { width } = useWindowDimensions();\r\n    const [displayImage, setDisplayImage] = useState(\"\");\r\n    const [autoPlay, setAutoPlay] = useState(false);\r\n\r\n    const renderPrice = (content: Game) => {\r\n        if (parseFloat(content.discount_percentage) > 0) {\r\n            return (\r\n                <div className=\"featuredAdjustedPriceWrap\">\r\n                    <div className=\"featuredDiscount\">\r\n                        <p>-{parseFloat(content.discount_percentage) * 100}%</p>\r\n                    </div>\r\n                    <div className=\"featuredPriceStrikedAndPriceWrap\">\r\n                        <p className=\"featuredOrigPriceStriked\">\r\n                            ${parseFloat(content.price).toFixed(2)}\r\n                        </p>\r\n                        <p className=\"featuredGamePrice\">\r\n                            $\r\n                            {parseFloat(content.price_after_discount).toFixed(\r\n                                2\r\n                            )}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            //no discount\r\n            return (\r\n                <div className=\"featuredGamePriceInnerWrap\">\r\n                    <p className=\"featuredGamePrice\">\r\n                        ${parseFloat(content.price).toFixed(2)}\r\n                    </p>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    //Duplicate of the one in Home, just in case we want to customize it\r\n    const renderScreenshotsForGame = (gameId: number) => {\r\n        let gameForSlide = _.filter(props.content, {\r\n            game_id: gameId,\r\n        });\r\n        let maxScreenshotToShow = 4;\r\n        if (gameForSlide.length > 0)\r\n            return gameForSlide[0].screenshots.map((screenshot, index) => {\r\n                if (index < maxScreenshotToShow)\r\n                    return (\r\n                        <img\r\n                            key={index}\r\n                            src={screenshot}\r\n                            onMouseEnter={(e) => {\r\n                                setDisplayImage(screenshot);\r\n                            }}\r\n                            onMouseLeave={(e) => {\r\n                                setDisplayImage(\"\");\r\n                            }}\r\n                            alt=\"preview\"\r\n                        ></img>\r\n                    );\r\n            });\r\n    };\r\n\r\n    const renderSlides = () => {\r\n        return props.content.map((content, index) => {\r\n            return (\r\n                <Slide\r\n                    index={index}\r\n                    key={index}\r\n                    onClick={() => {\r\n                        history.push(`game/${content.game_id}`);\r\n                    }}\r\n                    className=\"test\"\r\n                >\r\n                    {/* <LazyLoad> */}\r\n                    <div\r\n                        className={`featuredContainerCarousel featuredAnime${index}`}\r\n                        onLoad={() => {\r\n                            anime({\r\n                                targets: `.featuredAnime${index}`,\r\n                                // Properties\r\n                                // Animation Parameters\r\n\r\n                                opacity: [\r\n                                    {\r\n                                        value: [0, 1],\r\n                                        duration: 0,\r\n                                        easing: \"easeOutQuad\",\r\n                                    },\r\n                                ],\r\n                            });\r\n                        }}\r\n                    >\r\n                        <div className=\"featuredCarouselSectionWrap\">\r\n                            <div className=\"featuredCarouselImageSection\">\r\n                                <img\r\n                                    // src={content.cover_url}\r\n                                    src={\r\n                                        displayImage === \"\"\r\n                                            ? content.cover_url\r\n                                            : displayImage\r\n                                    }\r\n                                    alt=\"game cover\"\r\n                                ></img>\r\n                                <div className=\"featuredCarouselGamePrice\">\r\n                                    {renderPrice(content)}\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"featuredCarouselScreenshotSection\">\r\n                                <h1 className=\"featuredCarouselGameTitle\">\r\n                                    {content.title}\r\n                                </h1>\r\n                                <div className=\"featuredCarouselGameScreenshotsWrap\">\r\n                                    {renderScreenshotsForGame(content.game_id)}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    {/* </LazyLoad> */}\r\n                </Slide>\r\n            );\r\n        });\r\n    };\r\n\r\n    const renderCarousel = (): JSX.Element | JSX.Element[] => {\r\n        return (\r\n            <div\r\n                onMouseEnter={(e) => {\r\n                    setAutoPlay(false);\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                    setAutoPlay(true);\r\n                }}\r\n            >\r\n                <CarouselProvider\r\n                    naturalSlideWidth={100}\r\n                    naturalSlideHeight={width < LG_SCREEN_SIZE ? 45 : 31}\r\n                    // totalSlides={props.content.length}\r\n                    totalSlides={props.content.length}\r\n                    className=\"gameCarouselWrap\"\r\n                    visibleSlides={1}\r\n                    infinite={true}\r\n                    step={1}\r\n                    isPlaying={autoPlay}\r\n                    // isPlaying={false}\r\n                    interval={5000}\r\n                >\r\n                    <div className=\"sliderAndButtonWrap\">\r\n                        <Slider>{renderSlides()}</Slider>\r\n\r\n                        <ButtonBack\r\n                            className={`gameBackButton ${\r\n                                width < LG_SCREEN_SIZE\r\n                                    ? \"hideFeaturedCarouselButton\"\r\n                                    : \"\"\r\n                            }`}\r\n                            onClick={() => {\r\n                                setDisplayImage(\"\");\r\n                            }}\r\n                        >\r\n                            <RiArrowLeftSLine />\r\n                        </ButtonBack>\r\n\r\n                        <ButtonNext\r\n                            className={`gameNextButton ${\r\n                                width < LG_SCREEN_SIZE\r\n                                    ? \"hideFeaturedCarouselButton\"\r\n                                    : \"\"\r\n                            }`}\r\n                            onClick={() => {\r\n                                setDisplayImage(\"\");\r\n                            }}\r\n                        >\r\n                            <RiArrowRightSLine />\r\n                        </ButtonNext>\r\n\r\n                        <div\r\n                            className={`showButtonsForSmallScreensWrap ${\r\n                                width > LG_SCREEN_SIZE\r\n                                    ? \"hideFeaturedCarouselButtonsWrap\"\r\n                                    : \"\"\r\n                            }`}\r\n                        >\r\n                            <ButtonBack className=\"gameBackButton\">\r\n                                <RiArrowLeftSLine />\r\n                            </ButtonBack>\r\n                            <ButtonNext className=\"gameNextButton\">\r\n                                <RiArrowRightSLine />\r\n                            </ButtonNext>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        className={`carouselDotGroupWrap ${\r\n                            width < LG_SCREEN_SIZE ? \"hideCarouselDotGroup\" : \"\"\r\n                        }`}\r\n                    >\r\n                        <DotGroup></DotGroup>\r\n                    </div>\r\n                </CarouselProvider>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return <div>{renderCarousel()}</div>;\r\n};\r\n\r\nexport default FeaturedCarousel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n    CarouselProvider,\r\n    Slider,\r\n    Slide,\r\n    DotGroup,\r\n    ButtonBack,\r\n    ButtonNext,\r\n} from \"pure-react-carousel\";\r\nimport \"pure-react-carousel/dist/react-carousel.es.css\";\r\nimport { RiArrowRightSLine, RiArrowLeftSLine } from \"react-icons/ri\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useWindowDimensions from \"../windowDimensions\";\r\nimport { SpecialOfferCarouselProps } from \"./Home\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport { LG_SCREEN_SIZE, SM_SCREEN_SIZE, MED_SCREEN_SIZE } from \"../constants\";\r\nimport _ from \"lodash\";\r\nimport history from \"../browserHistory\";\r\n\r\nconst SpecialOfferCarousel: React.FC<SpecialOfferCarouselProps> = (props) => {\r\n    const { width } = useWindowDimensions();\r\n    const specialofferContent = _.chunk(props.content, 6);\r\n    // console.log(specialofferContent);\r\n    const renderSlides = () => {\r\n        return specialofferContent.map((contents, index) => {\r\n            return (\r\n                <Slide index={index} key={index}>\r\n                    <LazyLoad>\r\n                        <div\r\n                            className={`specialOfferContainerCarousel specialAnime${index}`}\r\n                            onLoad={() => {\r\n                                anime({\r\n                                    targets: `.specialAnime${index}`,\r\n                                    // Properties\r\n                                    // Animation Parameters\r\n\r\n                                    opacity: [\r\n                                        {\r\n                                            value: [0, 1],\r\n                                            duration: 250,\r\n                                            easing: \"easeOutQuad\",\r\n                                        },\r\n                                    ],\r\n                                });\r\n                            }}\r\n                        >\r\n                            <div className=\"specialOfferCarouselSectionContainer\">\r\n                                {contents.map((content, index) => {\r\n                                    return (\r\n                                        <div\r\n                                            onClick={() => {\r\n                                                history.push(\r\n                                                    `game/${content.game_id}`\r\n                                                );\r\n                                            }}\r\n                                            className=\"specialOfferGameContainer\"\r\n                                            key={index}\r\n                                        >\r\n                                            <img\r\n                                                src={content.cover_url}\r\n                                                alt=\"game\"\r\n                                            ></img>\r\n                                            <div className=\"specialOfferGameTextWrap\">\r\n                                                <div className=\"highlightedGamePriceWrap\">\r\n                                                    <div className=\"discountGamePrice\">\r\n                                                        -\r\n                                                        {parseFloat(\r\n                                                            content.discount_percentage\r\n                                                        ) * 100}\r\n                                                        %\r\n                                                    </div>\r\n                                                    <div className=\"adjustedPriceWrap\">\r\n                                                        <p className=\"gameOrigPrice\">\r\n                                                            $\r\n                                                            {parseFloat(\r\n                                                                content.price\r\n                                                            ).toFixed(2)}\r\n                                                        </p>\r\n                                                        <p className=\"gameAdjustedPrice\">\r\n                                                            $\r\n                                                            {parseFloat(\r\n                                                                content.price_after_discount\r\n                                                            ).toFixed(2)}\r\n                                                        </p>\r\n                                                    </div>\r\n                                                </div>\r\n                                            </div>\r\n                                        </div>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n                    </LazyLoad>\r\n                </Slide>\r\n            );\r\n        });\r\n    };\r\n    const renderHeight = () => {\r\n        if (width < SM_SCREEN_SIZE) {\r\n            return 78;\r\n        } else if (width < MED_SCREEN_SIZE) {\r\n            return 76;\r\n        } else if (width < LG_SCREEN_SIZE) {\r\n            return 33;\r\n        } else if (width >= LG_SCREEN_SIZE) {\r\n            return 30;\r\n        } else return 1;\r\n    };\r\n    const renderCarousel = (): JSX.Element | JSX.Element[] => {\r\n        return (\r\n            <div\r\n                onMouseEnter={(e) => {\r\n                    // setStyle({ opacity: \"1\" });\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                    // setStyle({ opacity: \"0\" });\r\n                }}\r\n            >\r\n                <CarouselProvider\r\n                    naturalSlideWidth={100}\r\n                    naturalSlideHeight={renderHeight()}\r\n                    totalSlides={specialofferContent.length}\r\n                    className=\"gameCarouselWrap\"\r\n                    visibleSlides={1}\r\n                    infinite={true}\r\n                    step={1}\r\n                    isPlaying={false}\r\n                    interval={5000}\r\n                >\r\n                    <div className=\"sliderAndButtonWrap\">\r\n                        <Slider>{renderSlides()}</Slider>\r\n\r\n                        <ButtonBack\r\n                            className={`gameBackButton ${\r\n                                width < LG_SCREEN_SIZE\r\n                                    ? \"hideFeaturedCarouselButton\"\r\n                                    : \"\"\r\n                            }`}\r\n                        >\r\n                            <RiArrowLeftSLine />\r\n                        </ButtonBack>\r\n                        <ButtonNext\r\n                            className={`gameNextButton ${\r\n                                width < LG_SCREEN_SIZE\r\n                                    ? \"hideFeaturedCarouselButton\"\r\n                                    : \"\"\r\n                            }`}\r\n                        >\r\n                            <RiArrowRightSLine />\r\n                        </ButtonNext>\r\n\r\n                        <div\r\n                            className={`showButtonsForSmallScreensWrap ${\r\n                                width > LG_SCREEN_SIZE\r\n                                    ? \"hideFeaturedCarouselButtonsWrap\"\r\n                                    : \"\"\r\n                            }`}\r\n                        >\r\n                            <ButtonBack className=\"gameBackButton\">\r\n                                <RiArrowLeftSLine />\r\n                            </ButtonBack>\r\n                            <ButtonNext className=\"gameNextButton\">\r\n                                <RiArrowRightSLine />\r\n                            </ButtonNext>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        className={`carouselDotGroupWrap ${\r\n                            width < LG_SCREEN_SIZE ? \"hideCarouselDotGroup\" : \"\"\r\n                        }`}\r\n                    >\r\n                        <DotGroup></DotGroup>\r\n                    </div>\r\n                </CarouselProvider>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return <div>{renderCarousel()}</div>;\r\n};\r\n\r\nexport default SpecialOfferCarousel;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n    CarouselProvider,\r\n    Slider,\r\n    Slide,\r\n    DotGroup,\r\n    ButtonBack,\r\n    ButtonNext,\r\n} from \"pure-react-carousel\";\r\nimport \"pure-react-carousel/dist/react-carousel.es.css\";\r\nimport { RiArrowRightSLine, RiArrowLeftSLine } from \"react-icons/ri\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useWindowDimensions from \"../windowDimensions\";\r\nimport { CommunityCarouelProps } from \"./Home\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport history from \"../browserHistory\";\r\nimport {\r\n    LG_SCREEN_SIZE,\r\n    XL_SCREEN_SIZE,\r\n    MED_SCREEN_SIZE,\r\n    SM_SCREEN_SIZE,\r\n} from \"../constants\";\r\nimport { Game } from \"../actions\";\r\nconst videosFromSteam = [\r\n    \"https://cdn.akamai.steamstatic.com/steam/apps/256767815/movie480.webm?t=1583175736\",\r\n    \"https://cdn.cloudflare.steamstatic.com/steam/apps/81958/movie480.webm?t=1554409259\",\r\n    \"https://cdn.cloudflare.steamstatic.com/steam/apps/256694830/movie480.webm?t=1561485484\",\r\n    \"https://cdn.akamai.steamstatic.com/steam/apps/2028471/movie480.webm?t=1447357639\",\r\n];\r\nconst CommunityCarousel: React.FC<CommunityCarouelProps> = (props) => {\r\n    const { width } = useWindowDimensions();\r\n    const [style, setStyle] = useState({ opacity: \"1\" });\r\n\r\n    const renderPrice = (content: Game) => {\r\n        if (parseFloat(content.discount_percentage) > 0) {\r\n            return (\r\n                <div className=\"communityAdjustedPriceWrap\">\r\n                    <div className=\"communityDiscount\">\r\n                        -{parseFloat(content.discount_percentage) * 100}%\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"communityOrigPriceStriked\">\r\n                            ${parseFloat(content.price).toFixed(2)}\r\n                        </p>\r\n                        <p className=\"communityGamePrice\">\r\n                            $\r\n                            {parseFloat(content.price_after_discount).toFixed(\r\n                                2\r\n                            )}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            //no discount\r\n            return (\r\n                <p className=\"chartGamePrice\">\r\n                    ${parseFloat(content.price).toFixed(2)}\r\n                </p>\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderSlides = () => {\r\n        return props.content.map((content, index) => {\r\n            return (\r\n                <Slide\r\n                    index={index}\r\n                    key={index}\r\n                    onClick={() => {\r\n                        history.push(`/game/${content.game_id}`);\r\n                    }}\r\n                >\r\n                    <LazyLoad>\r\n                        <div\r\n                            key={index}\r\n                            className={`communityContainerCarousel communityAnime${index}`}\r\n                            onLoad={() => {\r\n                                anime({\r\n                                    targets: `.communityAnime${index}`,\r\n                                    // Properties\r\n                                    // Animation Parameters\r\n\r\n                                    opacity: [\r\n                                        {\r\n                                            value: [0, 1],\r\n                                            duration: 250,\r\n                                            easing: \"easeOutQuad\",\r\n                                        },\r\n                                    ],\r\n                                });\r\n                            }}\r\n                        >\r\n                            <div className=\"communityCarouselSectionWrap\">\r\n                                <div\r\n                                    className=\"communityCarouselImageSection\"\r\n                                    onMouseEnter={(e) => {\r\n                                        setStyle({ opacity: \"1\" });\r\n                                    }}\r\n                                    onMouseLeave={(e) => {\r\n                                        setStyle({ opacity: \"0\" });\r\n                                    }}\r\n                                >\r\n                                    <img\r\n                                        src={content.cover_url}\r\n                                        alt=\"game\"\r\n                                    ></img>\r\n\r\n                                    <video\r\n                                        className=\"communityCarouselVid\"\r\n                                        autoPlay={true}\r\n                                        playsInline={false}\r\n                                        muted={true}\r\n                                        loop={true}\r\n                                        style={style}\r\n                                    >\r\n                                        {/* <source\r\n                                            src=\"  https://cdn.cloudflare.steamstatic.com/steam/apps/256820708/movie480_vp9.webm?t=1612810771\"\r\n                                            type=\"video/mp4\"\r\n                                        /> */}\r\n                                        <source\r\n                                            src={videosFromSteam[index]}\r\n                                            type=\"video/mp4\"\r\n                                        />\r\n                                    </video>\r\n                                    <div className=\"communityPrice\">\r\n                                        {renderPrice(content)}\r\n                                    </div>\r\n                                </div>\r\n                                <div className=\"communityCarouselAboutSection\">\r\n                                    <p className=\"communityCarouselGameAbout\">\r\n                                        {content.about}\r\n                                    </p>\r\n\r\n                                    <p className=\"communityCarouselVisitGame\">\r\n                                        Visit Game Page\r\n                                    </p>\r\n\r\n                                    {/* <div className=\"communityUserInfoWrap\">\r\n                                        <img\r\n                                            className=\"communityAvatar\"\r\n                                            src=\"https://cdn.cloudflare.steamstatic.com/steamcommunity/public/images/avatars/fd/fdfd938f7eae06151877fc2e14e6d70806463c8c.jpg\"\r\n                                            alt=\"avatar\"\r\n                                        ></img>\r\n                                        <p className=\"communityUsername\">\r\n                                            Username of user\r\n                                        </p>\r\n                                    </div> */}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </LazyLoad>\r\n                </Slide>\r\n            );\r\n        });\r\n    };\r\n\r\n    const renderCarousel = (): JSX.Element | JSX.Element[] => {\r\n        return (\r\n            <div\r\n                onMouseEnter={(e) => {\r\n                    // setStyle({ opacity: \"1\" });\r\n                }}\r\n                onMouseLeave={(e) => {\r\n                    // setStyle({ opacity: \"0\" });\r\n                }}\r\n            >\r\n                <CarouselProvider\r\n                    naturalSlideWidth={100}\r\n                    naturalSlideHeight={width < LG_SCREEN_SIZE ? 45 : 31}\r\n                    totalSlides={props.content.length}\r\n                    className=\"gameCarouselWrap\"\r\n                    visibleSlides={1}\r\n                    infinite={true}\r\n                    step={1}\r\n                    // isPlaying={true}\r\n                    interval={5000}\r\n                >\r\n                    <div className=\"sliderAndButtonWrap\">\r\n                        <Slider>{renderSlides()}</Slider>\r\n\r\n                        <ButtonBack\r\n                            className={`gameBackButton ${\r\n                                width < LG_SCREEN_SIZE\r\n                                    ? \"hideCommunityCarouselButton\"\r\n                                    : \"\"\r\n                            }`}\r\n                        >\r\n                            <RiArrowLeftSLine />\r\n                        </ButtonBack>\r\n                        <ButtonNext\r\n                            className={`gameNextButton ${\r\n                                width < LG_SCREEN_SIZE\r\n                                    ? \"hideCommunityCarouselButton\"\r\n                                    : \"\"\r\n                            }`}\r\n                        >\r\n                            <RiArrowRightSLine />\r\n                        </ButtonNext>\r\n\r\n                        <div\r\n                            className={`showButtonsForSmallScreensWrap ${\r\n                                width > LG_SCREEN_SIZE\r\n                                    ? \"hideCommunityCarouselButtonsWrap\"\r\n                                    : \"\"\r\n                            }`}\r\n                        >\r\n                            <ButtonBack className=\"gameBackButton\">\r\n                                <RiArrowLeftSLine />\r\n                            </ButtonBack>\r\n                            <ButtonNext className=\"gameNextButton\">\r\n                                <RiArrowRightSLine />\r\n                            </ButtonNext>\r\n                        </div>\r\n                    </div>\r\n                    <div\r\n                        className={`carouselDotGroupWrap ${\r\n                            width < LG_SCREEN_SIZE ? \"hideCarouselDotGroup\" : \"\"\r\n                        }`}\r\n                    >\r\n                        <DotGroup></DotGroup>\r\n                    </div>\r\n                </CarouselProvider>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return <div>{renderCarousel()}</div>;\r\n};\r\n\r\nexport default CommunityCarousel;\r\n","import { ActionTypes, AuthActions } from \"../actions\";\r\n\r\nexport interface AuthStateResponse {\r\n    authenticated?: string | null;\r\n    errorMessage?: string;\r\n}\r\n\r\nexport const AUTH_STATE: AuthStateResponse = {\r\n    authenticated: \"\",\r\n    errorMessage: \"\",\r\n};\r\nconst authReducer = (\r\n    state: AuthStateResponse = AUTH_STATE,\r\n    action: AuthActions\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.AUTH_USER:\r\n            return {\r\n                ...state,\r\n                authenticated: action.payload.token,\r\n                errorMessage: \"\",\r\n            };\r\n        case ActionTypes.AUTH_ERROR:\r\n            return {\r\n                ...state,\r\n                authenticated: \"\",\r\n                errorMessage: action.payload,\r\n            };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default authReducer;\r\n","import {\r\n    ActionTypes,\r\n    FetchGamesAction,\r\n    FetchGamesByKeywordAction,\r\n    FetchGamesResponse,\r\n} from \"../actions\";\r\n\r\nexport interface GamesStateResponse {\r\n    data?: FetchGamesResponse;\r\n}\r\n\r\nconst gamesReducer = (\r\n    state: GamesStateResponse = {},\r\n    action: FetchGamesAction | FetchGamesByKeywordAction\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_GAMES:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.FETCH_GAMES_BY_KEYWORD:\r\n            return { ...state, data: action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default gamesReducer;\r\n","import {\r\n    ActionTypes,\r\n    FetchDiscountedGamesAction,\r\n    FetchGamesResponse,\r\n} from \"../actions\";\r\n\r\nexport interface DiscountedGamesStateResponse {\r\n    data?: FetchGamesResponse;\r\n}\r\n\r\nconst gamesReducer = (\r\n    state: DiscountedGamesStateResponse = {},\r\n    action: FetchDiscountedGamesAction\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_GAMES_DISCOUNTED:\r\n            return { ...state, data: action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default gamesReducer;\r\n","import {\r\n    ActionTypes,\r\n    FetchGameInfoAction,\r\n    FetchGameInfoResponse,\r\n} from \"../actions\";\r\n\r\nexport interface GameInfoStateResponse {\r\n    data?: FetchGameInfoResponse;\r\n}\r\n\r\nconst GameInfoReducer = (\r\n    state: GameInfoStateResponse = {},\r\n    action: FetchGameInfoAction\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_GAME_INFO:\r\n            return { ...state, data: action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default GameInfoReducer;\r\n","import { ActionTypes, ServerError, GamesErrorAction } from \"../actions\";\r\n// import {\r\n//     Media,\r\n// } from \"../actions\";\r\n\r\nexport interface ErrorStateResponse {\r\n    data?: ServerError;\r\n}\r\n\r\nconst erorrReducer = (\r\n    state: ErrorStateResponse = {},\r\n    action: GamesErrorAction\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.GAME_ERROR:\r\n            return { ...state, data: action.payload };\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default erorrReducer;\r\n","import {\r\n    ActionTypes,\r\n    EditReviewAction,\r\n    FetchGameInfoReviewsAction,\r\n    ReviewsResponse,\r\n    PostReviewAction,\r\n    DeleteReviewAction,\r\n} from \"../actions\";\r\n\r\nexport interface GameInfoReviewsStateResponse {\r\n    data?: ReviewsResponse;\r\n}\r\n\r\nconst gameInfoReviewsReducer = (\r\n    state: GameInfoReviewsStateResponse = {},\r\n    action:\r\n        | FetchGameInfoReviewsAction\r\n        | PostReviewAction\r\n        | EditReviewAction\r\n        | DeleteReviewAction\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_GAME_INFO_REVIEWS:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.POST_REVIEW:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.EDIT_REVIEW:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.DELETE_REVIEW:\r\n            return { ...state, data: action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default gameInfoReviewsReducer;\r\n","import {\r\n    ActionTypes,\r\n    FetchProfileAction,\r\n    EditProfileAction,\r\n    ProfileResponse,\r\n} from \"../actions\";\r\n\r\nexport interface ProfileStateResponse {\r\n    data?: ProfileResponse;\r\n}\r\n\r\nconst ProfileReducer = (\r\n    state: ProfileStateResponse = {},\r\n    action: FetchProfileAction | EditProfileAction\r\n) => {\r\n    switch (action.type) {\r\n        case ActionTypes.FETCH_PROFILE:\r\n            return { ...state, data: action.payload };\r\n        case ActionTypes.EDIT_PROFILE:\r\n            return { ...state, data: action.payload };\r\n\r\n        default:\r\n            return state;\r\n    }\r\n};\r\n\r\nexport default ProfileReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport { reducer as formReducer, FormStateMap } from \"redux-form\";\r\n\r\nimport authReducer, { AuthStateResponse } from \"./authReducer\";\r\nimport gamesBaseInfoReducer, { GamesStateResponse } from \"./gamesReducer\";\r\nimport discountedGamesReducer, {\r\n    DiscountedGamesStateResponse,\r\n} from \"./discountedGamesReducer\";\r\nimport gameInfoReducer, { GameInfoStateResponse } from \"./gameInfoReducer\";\r\nimport errorReducer, { ErrorStateResponse } from \"./errorReducer\";\r\nimport gameInfoReviewsReducer, {\r\n    GameInfoReviewsStateResponse,\r\n} from \"./gameInfoReviewsReducer\";\r\nimport profileReducer, { ProfileStateResponse } from \"./profileReducer\";\r\nexport interface StoreState {\r\n    authStatus: AuthStateResponse;\r\n    games: GamesStateResponse;\r\n    discountedGames: DiscountedGamesStateResponse;\r\n    // search: SearchStateResponse;\r\n    gameInfo: GameInfoStateResponse;\r\n    gameInfoReviews: GameInfoReviewsStateResponse;\r\n    profile: ProfileStateResponse;\r\n    errors: ErrorStateResponse;\r\n    form: FormStateMap;\r\n}\r\nexport default combineReducers<StoreState>({\r\n    authStatus: authReducer,\r\n    games: gamesBaseInfoReducer,\r\n    discountedGames: discountedGamesReducer,\r\n    // search: searchReducer,\r\n    gameInfo: gameInfoReducer,\r\n    gameInfoReviews: gameInfoReviewsReducer,\r\n    profile: profileReducer,\r\n    errors: errorReducer,\r\n    form: formReducer,\r\n});\r\n","//THIS FILE IS USED FOR CORE RE-USABILITY; SPECIFICALLY FOR JEST/ENZYME TESTING\r\nimport React from \"react\";\r\nimport { Provider } from \"react-redux\";\r\nimport { createStore, applyMiddleware } from \"redux\";\r\nimport reducers from \"./reducers\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport reduxThunk from \"redux-thunk\";\r\nimport Cookies from \"js-cookie\";\r\nimport { ACCESS_TOKEN } from \"./constants\";\r\nexport const store = createStore(\r\n    reducers,\r\n    { authStatus: { authenticated: Cookies.get(ACCESS_TOKEN) } },\r\n    //if our inital state (authStauts) has a token from local storage, keep them logged in\r\n    composeWithDevTools(applyMiddleware(reduxThunk))\r\n);\r\n\r\ninterface IProps {\r\n    initialState?: {};\r\n    //Optional property so that not every file has to use initialState (initialState is used for testing)\r\n    children: any;\r\n    // any other props that come into the component\r\n}\r\nconst provider = ({ initialState = {}, children }: IProps) => {\r\n    // const store = createStore(\r\n    //     reducers,\r\n    //     { authStatus: { authenticated: Cookies.get(\"ACCESS_TOKEN\") } },\r\n    //     //if our inital state (authStauts) has a token from local storage, keep them logged in\r\n    //     composeWithDevTools(applyMiddleware(reduxThunk))\r\n    // );\r\n\r\n    return <Provider store={store}>{children}</Provider>;\r\n};\r\nexport default provider;\r\n","import axios from \"axios\";\r\n//Used for onine JSON-store database\r\nimport Cookies from \"js-cookie\";\r\nimport { store } from \"../Root\";\r\nimport { validateToken } from \"./auth\";\r\nimport { ACCESS_TOKEN } from \"../constants\";\r\n\r\nconst axiosConfig = axios.create({\r\n    // .. where we make our configurations\r\n    withCredentials: true, //Without it cookies will not be sent! Also, needs to be first in axios.create(..)!!\r\n    //As mentioned in:\r\n    //https://stackoverflow.com/questions/43002444/make-axios-send-cookies-in-its-requests-automatically\r\n    //   baseURL: \"http://localhost:5000/\",\r\n});\r\n\r\n//Followed article below for axios interceptors:\r\n//https://medium.com/swlh/handling-access-and-refresh-tokens-using-axios-interceptors-3970b601a5da\r\n\r\n//Executes before axios request\r\naxiosConfig.interceptors.request.use(\r\n    (config) => {\r\n        //Create Authorizaiton header for our axios requests\r\n        //Note: this won't affect /token because we are using the http-only cookie not authorization header :) (look at backend)\r\n        const token = Cookies.get(ACCESS_TOKEN);\r\n        //This is needed for our requireAuth hoc for protected routes.\r\n\r\n        //Flow -> Route that uses requireAuth will call validateToken action creator -> validateToken will call the\r\n        //protected routes that is setted up in the API with passport's jwtlogin\r\n        if (token) {\r\n            config.headers[\"authorization\"] = token;\r\n        }\r\n        return config;\r\n    },\r\n    (error) => {\r\n        Promise.reject(error);\r\n    }\r\n);\r\n\r\n//Axios calls response interceptors after it sends the request and receives a response.\r\naxiosConfig.interceptors.response.use(\r\n    //If we have a response from our recent http call\r\n    (response) => {\r\n        return response;\r\n    },\r\n    (error) => {\r\n        //Catches 403 error from our axios request\r\n        // throw error; //Throw error to action creator so it can be caught\r\n        const originalRequest = error.config;\r\n\r\n        //If my refresh token is not valid then my endpoint(/token) will come with 401 status code and\r\n        // If we do not handle it then it will go in an infinite loop.\r\n        // here is my condition to stop going in an infinite loop,\r\n\r\n        //But in this project, our refresh token will not expire to make things simpler :)\r\n        // if (error.response.status === 401 && originalRequest.url === \"/token\") {\r\n        //     return Promise.reject(error);\r\n        // }\r\n        // if (error.response) {\r\n        //Above if block is used so that the app won't crash  in localhost when the backend server is not running and we are testing\r\n        //an axios request (i.e calling an axios request and seeing if a loading component triggers)\r\n        if (error.response.status === 403 && !originalRequest._retry) {\r\n            //ALL 403 errors are because of invalid tokens\r\n            originalRequest._retry = true;\r\n            axiosConfig\r\n                .post(\"/api/token\")\r\n                .then((res) => {\r\n                    //Call original request again so that we can use the new access token on the original request\r\n                    //We give the new access token by giving it at axios.interceptors.request\r\n                    //return auth(originalRequest);\r\n                    store.dispatch(\r\n                        validateToken(\r\n                            `/api/${originalRequest.url}`,\r\n                            originalRequest._retry\r\n                        ) as any\r\n                    );\r\n\r\n                    //flow:\r\n                    //click on post-ad - > validate token in HOC ->  if post-ad with expired token -> returns 403 -> refrsh token is called\r\n                    //use ACCESS token in Authorization header (via axios interceptor response) -> trigger post-ad again with store.dispatch(validateToken(..))\r\n                })\r\n                .catch((error) => {\r\n                    return Promise.reject(error);\r\n                });\r\n        }\r\n    }\r\n    // }\r\n);\r\n\r\nexport default axiosConfig;\r\n","import { ActionTypes } from \"./types\";\r\nimport auth from \"./axiosConfig\";\r\nimport { Dispatch } from \"redux\";\r\nimport history from \"../browserHistory\";\r\n\r\nexport interface JWTType {\r\n    token: string;\r\n    refreshToken?: string;\r\n    //our api could also return the refresh token, but it dosent matter\r\n}\r\nexport interface AuthUserAction {\r\n    type: ActionTypes.AUTH_USER;\r\n    payload: JWTType;\r\n}\r\nexport interface AuthErrorAction {\r\n    type: ActionTypes.AUTH_ERROR;\r\n    payload: string;\r\n}\r\n\r\nexport const signUp = (formValues: any) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/api/signup\", formValues);\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        history.push(\"/\");\r\n    } catch (err) {\r\n        dispatch<AuthErrorAction>({\r\n            type: ActionTypes.AUTH_ERROR,\r\n            payload: \"- Email is in use\",\r\n        });\r\n    }\r\n};\r\nexport const signIn = (formValues: any) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/api/signin\", formValues);\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        history.push(\"/\");\r\n    } catch (err) {\r\n        // if (err.message === \"Network Error\") {\r\n        //     console.log(\"check error\", err);\r\n        // }\r\n\r\n        dispatch<AuthErrorAction>({\r\n            type: ActionTypes.AUTH_ERROR,\r\n            payload: \"- Invalid login credentials\",\r\n        });\r\n    }\r\n};\r\n\r\nexport const signOut = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\"/api/signout\");\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n        history.push(\"/\");\r\n        alert(\"Signed out succesfully\");\r\n    } catch (err) {\r\n        alert(\"Signed out failed, try again\");\r\n    }\r\n};\r\n\r\nexport const validateToken = (path: string, retriedCalling: boolean) => async (\r\n    dispatch: Dispatch\r\n) => {\r\n    try {\r\n        const response = await auth.post<JWTType>(\r\n            path,\r\n            {}\r\n            // { headers: { Authorization: cookieService.getAccessToken() } } //assigned in axios' interceptors.request\r\n        );\r\n        //Ensures that our current access token is the newest one; if a new access token is given,\r\n        //we will update our current access token\r\n\r\n        //requireAuth HOC relies on the dispatch below\r\n        dispatch<AuthUserAction>({\r\n            type: ActionTypes.AUTH_USER,\r\n            payload: response.data,\r\n        });\r\n    } catch (err) {\r\n        if (retriedCalling === true) {\r\n            // If it fails again with the new access token (might be a forged token)\r\n            // Invalid token, kick our users out from a certain resource only accecible to signed in users\r\n            // dispatch<AuthErrorAction>({\r\n            //     type: ActionTypes.AUTH_ERROR,\r\n            //     payload: \"\",\r\n            // });\r\n\r\n            //Log them out\r\n            dispatch(signOut() as any);\r\n        }\r\n    }\r\n};\r\n","import { ActionTypes } from \"./types\";\r\nimport axios from \"./axiosConfig\";\r\nimport { Dispatch } from \"redux\";\r\n\r\nimport { SERVER_ERROR_MESSAGE } from \"../constants\";\r\nimport history from \"../browserHistory\";\r\nimport { IPostAndEditReview } from \"../components/GameInfo\";\r\n\r\nexport interface ServerError {\r\n    error: string;\r\n}\r\n\r\nexport interface FetchGamesAction {\r\n    type: ActionTypes.FETCH_GAMES;\r\n    payload: FetchGamesResponse;\r\n}\r\n\r\nexport interface FetchDiscountedGamesAction {\r\n    type: ActionTypes.FETCH_GAMES_DISCOUNTED;\r\n    payload: FetchGamesResponse;\r\n}\r\n\r\nexport interface FetchGamesByKeywordAction {\r\n    type: ActionTypes.FETCH_GAMES_BY_KEYWORD;\r\n    payload: FetchGamesResponse;\r\n}\r\n\r\nexport interface FetchGameInfoAction {\r\n    type: ActionTypes.FETCH_GAME_INFO;\r\n    payload: FetchGameInfoResponse;\r\n}\r\n\r\nexport interface FetchGameInfoReviewsAction {\r\n    type: ActionTypes.FETCH_GAME_INFO_REVIEWS;\r\n    payload: ReviewsResponse;\r\n}\r\n\r\nexport interface PostReviewAction {\r\n    type: ActionTypes.POST_REVIEW;\r\n    payload: ReviewsResponse;\r\n}\r\n\r\nexport interface EditReviewAction {\r\n    type: ActionTypes.EDIT_REVIEW;\r\n    payload: ReviewsResponse;\r\n}\r\n\r\nexport interface DeleteReviewAction {\r\n    type: ActionTypes.DELETE_REVIEW;\r\n    payload: ReviewsResponse;\r\n}\r\n\r\nexport interface GamesErrorAction {\r\n    type: ActionTypes.GAME_ERROR;\r\n    payload: ServerError;\r\n}\r\n\r\nexport interface Game {\r\n    game_id: number;\r\n    title: string;\r\n    cover_url: string;\r\n    release_date: string;\r\n    about: string;\r\n    genres: string[];\r\n    screenshots: string[];\r\n    price: string;\r\n    discount_percentage: string;\r\n    price_after_discount: string;\r\n}\r\nexport interface Reviewer {\r\n    game_id: number;\r\n    username: string;\r\n    avatar_url: string;\r\n    recommend: boolean;\r\n    opinion: string;\r\n}\r\n\r\nexport interface FetchGamesResponse {\r\n    games: Game[];\r\n}\r\n\r\nexport interface FetchGameInfoResponse {\r\n    games: Game[];\r\n}\r\n\r\nexport interface ReviewsResponse {\r\n    reviews: Reviewer[];\r\n}\r\n\r\nexport const fetchGames = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<FetchGamesResponse>(`/api/games`);\r\n        dispatch<FetchGamesAction>({\r\n            type: ActionTypes.FETCH_GAMES,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchDiscountedGames = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<FetchGamesResponse>(\r\n            `/api/games-discounted`\r\n        );\r\n        dispatch<FetchDiscountedGamesAction>({\r\n            type: ActionTypes.FETCH_GAMES_DISCOUNTED,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchGamesByKeyword = (queryPath: string | string[]) => async (\r\n    dispatch: Dispatch\r\n) => {\r\n    try {\r\n        const response = await axios.get<FetchGamesResponse>(\r\n            `/api/search?q=${queryPath}`\r\n        );\r\n        dispatch<FetchGamesByKeywordAction>({\r\n            type: ActionTypes.FETCH_GAMES_BY_KEYWORD,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchGameInfo = (gameId: number) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<FetchGameInfoResponse>(\r\n            `/api/game-info/${gameId}`\r\n        );\r\n        dispatch<FetchGameInfoAction>({\r\n            type: ActionTypes.FETCH_GAME_INFO,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const fetchGameInfoReviews = (gameId: number) => async (\r\n    dispatch: Dispatch\r\n) => {\r\n    try {\r\n        const response = await axios.get<ReviewsResponse>(\r\n            `/api/reviews/${gameId}`\r\n        );\r\n        dispatch<FetchGameInfoReviewsAction>({\r\n            type: ActionTypes.FETCH_GAME_INFO_REVIEWS,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const postReview = (\r\n    formValues: IPostAndEditReview,\r\n    gameId: number\r\n) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.post<ReviewsResponse>(\r\n            `/api/review/${gameId}`,\r\n            formValues\r\n        );\r\n        dispatch<PostReviewAction>({\r\n            type: ActionTypes.POST_REVIEW,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const editReview = (\r\n    formValues: IPostAndEditReview,\r\n    gameId: number\r\n) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.patch<ReviewsResponse>(\r\n            `/api/edit/${gameId}`,\r\n            formValues\r\n        );\r\n        dispatch<EditReviewAction>({\r\n            type: ActionTypes.EDIT_REVIEW,\r\n            payload: response.data,\r\n        });\r\n        // alert(\"Success! You have edited your review.\");\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const deleteReview = (gameId: number) => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.delete<ReviewsResponse>(\r\n            `/api/delete/${gameId}`\r\n        );\r\n        dispatch<DeleteReviewAction>({\r\n            type: ActionTypes.DELETE_REVIEW,\r\n            payload: response.data,\r\n        });\r\n        alert(\"Success! You have deleted your review.\");\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n","import Loader from \"react-loader-spinner\";\r\nimport \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\r\nimport useWindowDimensions from \"../windowDimensions\";\r\nimport { MED_SCREEN_SIZE } from \"../constants\";\r\nconst Loading = (): JSX.Element => {\r\n    const { width } = useWindowDimensions();\r\n    return (\r\n        <Loader\r\n            type=\"ThreeDots\"\r\n            color=\"white\"\r\n            height={width < MED_SCREEN_SIZE ? 50 : 75}\r\n            width={width < MED_SCREEN_SIZE ? 50 : 75}\r\n            timeout={30000} //will show for 30 secs\r\n        />\r\n    );\r\n};\r\nexport default Loading;\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport history from \"../browserHistory\";\r\nimport { AiOutlineSearch } from \"react-icons/ai\";\r\nimport { fetchGamesByKeyword } from \"../actions\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport axios from \"../actions/axiosConfig\";\r\nimport { Game } from \"../actions\";\r\nimport useComponentVisible from \"../useComponentVisible\";\r\n\r\ninterface SearchbarProps {\r\n    fetchGamesByKeyword?(searchKeyword: string): void;\r\n}\r\n\r\nconst Searchbar: React.FC<SearchbarProps> = (props) => {\r\n    //Detect click outside of component:\r\n    // https://stackoverflow.com/questions/32553158/detect-click-outside-react-component\r\n    const {\r\n        ref,\r\n        isComponentVisible,\r\n        setIsComponentVisible,\r\n    } = useComponentVisible(true);\r\n    const searchBarInputRef = useRef<HTMLInputElement>(null);\r\n    const [searchTerm, setSearchTerm] = useState(\"\");\r\n    const [data, dataSet] = useState<any>(null);\r\n    useEffect(() => {\r\n        async function fetchMyAPI() {\r\n            let response = await axios.get(`/api/search?q=${searchTerm}`);\r\n            // console.log(\"matt\", response.data);\r\n            dataSet(response.data);\r\n        }\r\n\r\n        const delayDebounceFn = setTimeout(() => {\r\n            // Send Axios request here\r\n            if (props.fetchGamesByKeyword) {\r\n                if (searchTerm === \"\") {\r\n                    // history.push(\"/search\");\r\n                } else {\r\n                    fetchMyAPI();\r\n                    // history.push(`/search?q=${searchTerm}`);\r\n                }\r\n            }\r\n        }, 550);\r\n\r\n        return () => clearTimeout(delayDebounceFn);\r\n    }, [searchTerm]);\r\n\r\n    const handleKeyDown = (event: any) => {\r\n        //https://stackoverflow.com/questions/31272207/to-call-onchange-event-after-pressing-enter-key\r\n        if (event.key === \"Enter\") {\r\n            event.preventDefault();\r\n\r\n            if (searchTerm === \"\") {\r\n                history.push(\"/search\");\r\n            } else {\r\n                if (props.fetchGamesByKeyword)\r\n                    props.fetchGamesByKeyword(searchTerm);\r\n                history.push(`/search?q=${searchTerm}`);\r\n            }\r\n        }\r\n    };\r\n    const renderSearchPreview = () => {\r\n        if (data) {\r\n            if (data.games) {\r\n                if (data.games.length > 0) {\r\n                    return data.games.map((game: Game, index: number) => {\r\n                        return (\r\n                            <div\r\n                                className={`matchRow`}\r\n                                onClick={() =>\r\n                                    history.push(`/game/${game.game_id}`)\r\n                                }\r\n                            >\r\n                                <img\r\n                                    className={`matchRowImage matchRowImage${index}`}\r\n                                    src={game.cover_url}\r\n                                    onLoad={() => {\r\n                                        anime({\r\n                                            targets: `.matchRowImage${index}`,\r\n                                            // Properties\r\n                                            // Animation Parameters\r\n                                            opacity: [\"0\", \"1\"],\r\n\r\n                                            duration: 750,\r\n                                            easing: \"easeOutQuad\",\r\n                                        });\r\n                                    }}\r\n                                    alt=\"game\"\r\n                                ></img>\r\n                                <div className=\"matchTextWrap\">\r\n                                    <p className=\"matchTitle\">{game.title}</p>\r\n                                    <p className=\"matchPrice\">\r\n                                        $\r\n                                        {parseFloat(\r\n                                            game.price_after_discount\r\n                                        ).toFixed(2)}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        );\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return (\r\n        <React.Fragment>\r\n            <form className={\"searchBarForm\"}>\r\n                <input\r\n                    autoFocus={false}\r\n                    data-testid=\"searchBarInput\"\r\n                    className=\"searchBarInput\"\r\n                    type=\"search\"\r\n                    placeholder=\"Search games\"\r\n                    name=\"search\"\r\n                    onChange={(e) => setSearchTerm(e.target.value)}\r\n                    onKeyDown={handleKeyDown}\r\n                    autoComplete=\"off\"\r\n                    ref={searchBarInputRef}\r\n                    onClick={() => setIsComponentVisible(true)}\r\n                />\r\n                <AiOutlineSearch\r\n                    className=\"searchBarIcons\"\r\n                    data-testid=\"searchIcon\"\r\n                    onClick={() => {\r\n                        history.push(`search?q=${searchTerm}`);\r\n                    }}\r\n                />\r\n                <div\r\n                    className={`matchContainer ${\r\n                        isComponentVisible ? \"\" : \"hideMatchContainer\"\r\n                    }`}\r\n                    ref={ref}\r\n                >\r\n                    {renderSearchPreview()}\r\n                </div>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        // search: state.search,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { fetchGamesByKeyword })(Searchbar);\r\n","import { useState, useEffect, useRef } from \"react\";\r\n\r\nexport default function useComponentVisible(initialIsVisible: boolean) {\r\n    const [isComponentVisible, setIsComponentVisible] = useState(\r\n        initialIsVisible\r\n    );\r\n    const ref = useRef(null);\r\n\r\n    const handleClickOutside = (event: any) => {\r\n        //@ts-ignore\r\n        if (ref.current && !ref.current.contains(event.target)) {\r\n            setIsComponentVisible(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"click\", handleClickOutside, true);\r\n        return () => {\r\n            document.removeEventListener(\"click\", handleClickOutside, true);\r\n        };\r\n    });\r\n\r\n    return { ref, isComponentVisible, setIsComponentVisible };\r\n}\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport Searchbar from \"./Searchbar\";\r\nimport history from \"../browserHistory\";\r\nconst CartAndSearchbar: React.FC<{}> = () => {\r\n    let [cart, setCart] = useState<[]>([]);\r\n    let localCart = localStorage.getItem(\"cart\");\r\n\r\n    const addItem = (item: any) => {\r\n        //create a copy of our cart state, avoid overwritting existing state\r\n        let cartCopy: any = [...cart];\r\n\r\n        //assuming we have an ID field in our item\r\n        let { game_id } = item;\r\n\r\n        //look for item in cart array\r\n        let existingItem = cartCopy.find(\r\n            (cartItem: any) => cartItem.game_id === game_id\r\n        );\r\n\r\n        //if item already exists\r\n        console.log(existingItem);\r\n        if (existingItem) {\r\n        } else {\r\n            //if item doesn't exist, simply add it\r\n            cartCopy.push(item);\r\n        }\r\n\r\n        //update app state\r\n        setCart(cartCopy);\r\n\r\n        //make cart a string and store in local space\r\n        let stringCart = JSON.stringify(cartCopy);\r\n        localStorage.setItem(\"cart\", stringCart);\r\n    };\r\n    return (\r\n        <div className=\"cartAndSearchWrap\">\r\n            <button\r\n                className=\"cart\"\r\n                onClick={() => {\r\n                    history.push(\"/cart\");\r\n                }}\r\n            >{`Cart(${\r\n                localCart !== null ? JSON.parse(localCart).length : \"0\"\r\n            })`}</button>\r\n            <Searchbar />\r\n        </div>\r\n    );\r\n};\r\nexport default CartAndSearchbar;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { Router } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport Routes from \"./Routes\";\r\nimport FeaturedCarousel from \"./FeaturedCarousel\";\r\nimport SpecialOfferCarousel from \"./SpecialOfferCarousel\";\r\nimport CommunityCarousel from \"./CommunityCarousel\";\r\nimport _ from \"lodash\";\r\nimport { fetchGames, fetchDiscountedGames, Game } from \"../actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { GamesStateResponse } from \"../reducers/gamesReducer\";\r\nimport { ErrorStateResponse } from \"reducers/errorReducer\";\r\nimport { LG_SCREEN_SIZE, MED_SCREEN_SIZE } from \"../constants\";\r\nimport Loading from \"./Loading\";\r\nimport useWindowDimensions from \"../windowDimensions\";\r\nimport Searchbar from \"./Searchbar\";\r\nimport CartAndSearchbar from \"./CartAndSearchbar\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nexport interface FeaturedCarouselProps {\r\n    content: Game[];\r\n}\r\nexport interface SpecialOfferCarouselProps {\r\n    content: Game[];\r\n}\r\nexport interface CommunityCarouelProps {\r\n    content: Game[];\r\n}\r\n\r\ninterface HomeProps {\r\n    games: GamesStateResponse;\r\n    discountedGames: GamesStateResponse;\r\n    errors: ErrorStateResponse;\r\n    fetchGames(): void;\r\n    fetchDiscountedGames(): void;\r\n}\r\n\r\nconst Home: React.FC<HomeProps> = (props) => {\r\n    let localCart = localStorage.getItem(\"cart\");\r\n    const [hoverData, setHoverData] = useState(-9); //We can also switch this ot 1 since our first game has a game_id of 1\r\n    const [specialsTabClicked, setSpecialsTabClicked] = useState(false);\r\n    useEffect(() => {\r\n        props.fetchGames();\r\n        props.fetchDiscountedGames();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (props.games.data)\r\n            if (props.games.data.games.length > 0)\r\n                //Get game id of first game\r\n                setHoverData(props.games.data.games[0].game_id);\r\n    }, [props.games.data]);\r\n\r\n    const { width } = useWindowDimensions();\r\n\r\n    const renderGenresForGameText = (gameId: number) => {\r\n        let filteredContent = _.filter(props.games.data?.games, {\r\n            game_id: gameId,\r\n        });\r\n        if (filteredContent.length === 0)\r\n            filteredContent = _.filter(props.discountedGames.data?.games, {\r\n                game_id: gameId,\r\n            });\r\n        if (filteredContent.length > 0)\r\n            return filteredContent.map((content, index) => {\r\n                return content.genres.map((genre, index) => {\r\n                    if (content.genres.length === index + 1) {\r\n                        return ` ${genre}`;\r\n                    }\r\n                    return ` ${genre},`;\r\n                });\r\n            });\r\n    };\r\n\r\n    const renderGenresForGameTag = (gameId: number) => {\r\n        let filteredContent = _.filter(props.games.data?.games, {\r\n            game_id: gameId,\r\n        });\r\n\r\n        if (filteredContent.length === 0)\r\n            filteredContent = _.filter(props.discountedGames.data?.games, {\r\n                game_id: gameId,\r\n            });\r\n\r\n        if (filteredContent.length > 0)\r\n            return filteredContent.map((content, index) => {\r\n                return content.genres.map((genre, index) => {\r\n                    return (\r\n                        <p key={index} className=\"chartGamePreviewGenres\">\r\n                            {genre}\r\n                        </p>\r\n                    );\r\n                });\r\n            });\r\n    };\r\n\r\n    const renderScreenshotsForGame = (gameId: number) => {\r\n        let game = _.filter(props.games.data?.games, {\r\n            game_id: gameId,\r\n        });\r\n        if (game.length === 0)\r\n            game = _.filter(props.discountedGames.data?.games, {\r\n                game_id: gameId,\r\n            });\r\n        let maxScreenshotToShow = 4;\r\n\r\n        if (game.length > 0)\r\n            return game[0].screenshots.map((screenshot, index) => {\r\n                if (index < maxScreenshotToShow)\r\n                    return (\r\n                        <img\r\n                            className={`gameChartScreenshotPreview gameChartScreenshotPreview${index}`}\r\n                            key={index}\r\n                            onLoad={() => {\r\n                                anime({\r\n                                    targets: `.gameChartScreenshotPreview${index}`,\r\n                                    opacity: [\r\n                                        {\r\n                                            value: [0, 1],\r\n                                            duration: 250,\r\n                                            easing: \"easeOutQuad\",\r\n                                        },\r\n                                    ],\r\n                                });\r\n                            }}\r\n                            src={screenshot}\r\n                            alt=\"preview\"\r\n                        ></img>\r\n                    );\r\n            });\r\n    };\r\n\r\n    const renderPrice = (content: Game) => {\r\n        if (parseFloat(content.discount_percentage) > 0) {\r\n            return (\r\n                <div className=\"chartAdjustedPriceWrap\">\r\n                    <div className=\"chartDiscount\">\r\n                        -{parseFloat(content.discount_percentage) * 100}%\r\n                    </div>\r\n                    <div>\r\n                        <p className=\"chartOrigPriceStriked\">\r\n                            ${parseFloat(content.price).toFixed(2)}\r\n                        </p>\r\n                        <p className=\"chartGamePrice\">\r\n                            $\r\n                            {parseFloat(content.price_after_discount).toFixed(\r\n                                2\r\n                            )}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            //no discount\r\n            return (\r\n                <p className=\"chartGamePrice\">\r\n                    ${parseFloat(content.price).toFixed(2)}\r\n                </p>\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderChartGames = () => {\r\n        let contentToRender = props.games.data?.games;\r\n        if (specialsTabClicked === true) {\r\n            contentToRender = props.discountedGames.data?.games;\r\n        }\r\n        if (contentToRender)\r\n            return contentToRender.map((content, index) => {\r\n                if (index < 11) {\r\n                    return (\r\n                        <div\r\n                            onClick={() => {\r\n                                history.push(`game/${content.game_id}`);\r\n                            }}\r\n                            key={index}\r\n                            className={`chartGameContainer ${\r\n                                hoverData === content.game_id\r\n                                    ? \"chartGameContainerToggled\"\r\n                                    : \"\"\r\n                            }`}\r\n                            onMouseOver={() => {\r\n                                setHoverData(content.game_id);\r\n                            }}\r\n                        >\r\n                            <div\r\n                                className={`chartGameImage chartGameImage${index}`}\r\n                                onLoad={() => {\r\n                                    anime({\r\n                                        targets: `.chartGameImage${index}`,\r\n                                        // Properties\r\n                                        // Animation Parameters\r\n\r\n                                        opacity: [\r\n                                            {\r\n                                                value: [0, 1],\r\n                                                duration: 250,\r\n                                                easing: \"easeOutQuad\",\r\n                                            },\r\n                                        ],\r\n                                    });\r\n                                }}\r\n                            >\r\n                                <img src={content.cover_url} alt=\"game\"></img>\r\n                            </div>\r\n                            <div className=\"chartGameInfo\">\r\n                                <div className=\"chartGameGenreAndTitle\">\r\n                                    <p className=\"chartGameTitle\">\r\n                                        {content.title}\r\n                                    </p>\r\n                                    <p className=\"chartGameGenres\">\r\n                                        {renderGenresForGameText(\r\n                                            content.game_id\r\n                                        )}\r\n                                    </p>\r\n                                </div>\r\n                                {renderPrice(content)}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                }\r\n            });\r\n    };\r\n\r\n    const renderContent = () => {\r\n        if (props.errors.data?.error) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">\r\n                        {props.errors.data?.error}\r\n                    </h3>\r\n                </div>\r\n            );\r\n        } else if (props.games.data && props.discountedGames.data) {\r\n            //If we enter a search that's not found, our reducer will have games as an empty array\r\n            //It takes time for React to change our reducer after calling props.fetchGames() and props.fetchDiscountedGames()\r\n            if (\r\n                props.games.data.games.length > 0 &&\r\n                props.discountedGames.data.games.length > 0\r\n            ) {\r\n                let specialTabsHoverData =\r\n                    props.discountedGames.data?.games[0].game_id;\r\n                let carouselSplit = _.chunk(props.games.data.games, 4);\r\n                if (carouselSplit[0] && carouselSplit[3])\r\n                    return (\r\n                        <div className=\"homeContainer\">\r\n                            <div className=\"homeFirstSection\">\r\n                                <CartAndSearchbar />\r\n                                <h1 className=\"bannerTitle\">\r\n                                    Featured And Recommended\r\n                                </h1>\r\n\r\n                                <FeaturedCarousel content={carouselSplit[0]} />\r\n                                <h1 className=\"bannerTitle\">Special Offers</h1>\r\n                                <SpecialOfferCarousel\r\n                                    content={props.discountedGames.data.games}\r\n                                />\r\n                                <h1 className=\"bannerTitle\">\r\n                                    The Community Recommends\r\n                                </h1>\r\n                                <CommunityCarousel content={carouselSplit[3]} />\r\n                            </div>\r\n                            <div className=\"chartTabsWrap\">\r\n                                <div\r\n                                    className={`chartTab ${\r\n                                        specialsTabClicked\r\n                                            ? \"\"\r\n                                            : \" chartTabToggled\"\r\n                                    }`}\r\n                                    onClick={() => setSpecialsTabClicked(false)}\r\n                                >\r\n                                    Top Sellers\r\n                                </div>\r\n                                <div\r\n                                    className={`chartTab ${\r\n                                        specialsTabClicked\r\n                                            ? \"chartTabToggled\"\r\n                                            : \"\"\r\n                                    }`}\r\n                                    onClick={() => {\r\n                                        setSpecialsTabClicked(true);\r\n                                        setHoverData(specialTabsHoverData);\r\n                                    }}\r\n                                >\r\n                                    Specials\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div className=\"chart\">\r\n                                <div className=\"chartGamesColumn\">\r\n                                    <div className=\"seeMoreWrap\">\r\n                                        <p className=\"seeMoreText\">See More:</p>\r\n                                        <div\r\n                                            className=\"chartSeeMore\"\r\n                                            onClick={() => {\r\n                                                if (specialsTabClicked) {\r\n                                                    history.push({\r\n                                                        pathname: \"/search\",\r\n                                                        search: `?specials`,\r\n                                                    });\r\n                                                } else {\r\n                                                    history.push({\r\n                                                        pathname: \"/search\",\r\n                                                    });\r\n                                                }\r\n                                            }}\r\n                                        >\r\n                                            {specialsTabClicked\r\n                                                ? \"Specials\"\r\n                                                : \"Top Sellers\"}\r\n                                        </div>\r\n                                    </div>\r\n                                    {renderChartGames()}\r\n                                </div>\r\n                                {renderChartGamePreview(hoverData)}\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                else {\r\n                    return (\r\n                        <div className=\"loadingCenter\">\r\n                            <Loading />\r\n                        </div>\r\n                    );\r\n                }\r\n            } else {\r\n                return (\r\n                    <div className=\"loadingCenter\">\r\n                        <Loading />\r\n                    </div>\r\n                );\r\n            }\r\n        } else {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderChartGamePreview = (gameId: number) => {\r\n        let filteredContent = _.filter(props.games.data?.games, {\r\n            game_id: gameId,\r\n        });\r\n        if (filteredContent.length > 0)\r\n            return (\r\n                <div className=\"chartGamePreviewHover\">\r\n                    <p className=\"chartGamePreviewTitle\">\r\n                        {filteredContent.map((content, index) => {\r\n                            return content.title;\r\n                        })}\r\n                    </p>\r\n\r\n                    <div className=\"chartGamePreviewGenresWrap\">\r\n                        {renderGenresForGameTag(gameId)}\r\n                    </div>\r\n                    <div className=\"chartGamePreviewScreenshots\">\r\n                        {renderScreenshotsForGame(gameId)}\r\n                    </div>\r\n                </div>\r\n            );\r\n    };\r\n    return <React.Fragment>{renderContent()}</React.Fragment>;\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        games: state.games,\r\n        discountedGames: state.discountedGames,\r\n        errors: state.errors,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    fetchGames,\r\n    fetchDiscountedGames,\r\n})(Home);\r\n","import React, { useEffect } from \"react\";\r\nimport history from \"../browserHistory\";\r\nimport { connect } from \"react-redux\";\r\nimport { signOut } from \"../actions\";\r\nimport { StoreState } from \"../reducers\";\r\ninterface HeaderProps {\r\n    authStatus?: string | null;\r\n    signOut(): void;\r\n}\r\nconst Header: React.FC<HeaderProps> = (props) => {\r\n    return (\r\n        <nav className=\"headerContainer\" data-testid=\"steamHeaderLogo\">\r\n            <div\r\n                className=\"headerLogoImageWrap\"\r\n                onClick={() => {\r\n                    history.push(\"/\");\r\n                }}\r\n            >\r\n                <img\r\n                    src=\"https://store.cloudflare.steamstatic.com/public/shared/images/responsive/header_logo.png\"\r\n                    alt=\"logo\"\r\n                />\r\n            </div>\r\n            <div className=\"headerAuthWrap\">\r\n                {props.authStatus && (\r\n                    <h3\r\n                        className=\"headerProfileText\"\r\n                        onClick={() => history.push(\"/profile\")}\r\n                    >\r\n                        Profile\r\n                    </h3>\r\n                )}\r\n                <h3\r\n                    className=\"headerAuthText\"\r\n                    data-testid=\"signInOrSignOut\"\r\n                    onClick={() => {\r\n                        if (props.authStatus) props.signOut();\r\n                        else {\r\n                            history.push(\"/signin\");\r\n                        }\r\n                    }}\r\n                >\r\n                    {props.authStatus ? \"Sign Out\" : \"Sign In\"}\r\n                </h3>\r\n            </div>\r\n        </nav>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.authenticated,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { signOut })(Header);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {\r\n    CarouselProvider,\r\n    Slider,\r\n    Slide,\r\n    DotGroup,\r\n    ButtonBack,\r\n    ButtonNext,\r\n} from \"pure-react-carousel\";\r\nimport \"pure-react-carousel/dist/react-carousel.es.css\";\r\nimport { RiArrowRightSLine, RiArrowLeftSLine } from \"react-icons/ri\";\r\nimport LazyLoad from \"react-lazyload\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport useWindowDimensions from \"../windowDimensions\";\r\nimport { GameInfoCarouselProps } from \"./GameInfo\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport { LG_SCREEN_SIZE, MED_SCREEN_SIZE } from \"../constants\";\r\n\r\nconst GameInfoCarousel: React.FC<GameInfoCarouselProps> = (props) => {\r\n    const { width } = useWindowDimensions();\r\n    const [displayImage, setDisplayImage] = useState(props.screenshots[0]);\r\n    const [imageClicked, setImageClicked] = useState(0);\r\n\r\n    useEffect(() => {\r\n        //When user clicks another game in home page after clicking a game\r\n        // displayImage hook was at the previous's displayImage\r\n        //so update it here\r\n        setDisplayImage(props.screenshots[0]);\r\n    }, [props.screenshots]);\r\n\r\n    const renderSlides = () => {\r\n        return props.screenshots.map((screenshot, index) => {\r\n            return (\r\n                <Slide index={index} key={index}>\r\n                    <LazyLoad>\r\n                        <div\r\n                            className={`gameInfoContainerCarousel gameInfoAnime${index}`}\r\n                            // onLoad={() => {\r\n                            //     anime({\r\n                            //         targets: `.gameInfoAnime${index}`,\r\n                            //         // Properties\r\n                            //         // Animation Parameters\r\n\r\n                            //         opacity: [\r\n                            //             {\r\n                            //                 value: [0, 1],\r\n                            //                 duration: 250,\r\n                            //                 easing: \"easeOutQuad\",\r\n                            //             },\r\n                            //         ],\r\n                            //     });\r\n                            // }}\r\n                            onClick={(event) => {\r\n                                setDisplayImage(screenshot);\r\n                                setImageClicked(index);\r\n                                anime({\r\n                                    targets: `.gameInfoDisplayImage`,\r\n                                    // Properties\r\n                                    // Animation Parameters\r\n\r\n                                    opacity: [\r\n                                        {\r\n                                            value: [1, 0],\r\n                                            duration: 0,\r\n                                            easing: \"linear\",\r\n                                        },\r\n                                    ],\r\n                                });\r\n                            }}\r\n                        >\r\n                            <div\r\n                                className={`gameInfoCarouselScreenshots gameInfoScreenshot${index} ${\r\n                                    imageClicked === index\r\n                                        ? `gameInfoCarouselScreenshotsClicked`\r\n                                        : ``\r\n                                } `}\r\n                                onLoad={() => {\r\n                                    anime({\r\n                                        targets: `.gameInfoScreenshot${index}`,\r\n                                        // Properties\r\n                                        // Animation Parameters\r\n\r\n                                        opacity: [\r\n                                            {\r\n                                                value: [0, 1],\r\n                                                duration: 250,\r\n                                                easing: \"easeOutQuad\",\r\n                                            },\r\n                                        ],\r\n                                    });\r\n                                }}\r\n                            >\r\n                                <img\r\n                                    className={`gameInfoScreenshot`}\r\n                                    src={screenshot}\r\n                                    alt=\"screenshot\"\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                    </LazyLoad>\r\n                </Slide>\r\n            );\r\n        });\r\n    };\r\n\r\n    const renderCarousel = (): JSX.Element | JSX.Element[] => {\r\n        return (\r\n            <div>\r\n                <CarouselProvider\r\n                    naturalSlideWidth={100}\r\n                    naturalSlideHeight={60}\r\n                    totalSlides={props.screenshots.length}\r\n                    className=\"gameCarouselWrap\"\r\n                    visibleSlides={4}\r\n                    infinite={true}\r\n                    step={1}\r\n                >\r\n                    <div className=\"sliderAndButtonWrap\">\r\n                        <Slider>{renderSlides()}</Slider>\r\n\r\n                        <div className={`showButtonsForSmallScreensWrap`}>\r\n                            <ButtonBack className=\"gameBackButton\">\r\n                                <RiArrowLeftSLine />\r\n                            </ButtonBack>\r\n                            <ButtonNext className=\"gameNextButton\">\r\n                                <RiArrowRightSLine />\r\n                            </ButtonNext>\r\n                        </div>\r\n                    </div>\r\n                </CarouselProvider>\r\n            </div>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <img\r\n                className=\"gameInfoDisplayImage\"\r\n                src={displayImage}\r\n                onLoad={() => {\r\n                    anime({\r\n                        targets: `.gameInfoDisplayImage`,\r\n                        opacity: [\r\n                            {\r\n                                value: [0, 1],\r\n                                duration: 400,\r\n                                easing: \"linear\",\r\n                            },\r\n                        ],\r\n                    });\r\n                }}\r\n                alt=\"game\"\r\n            ></img>\r\n            {renderCarousel()}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default GameInfoCarousel;\r\n","import React, { ComponentType, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { WriteReviewFormProps } from \"./GameInfo\";\r\nimport { FiThumbsUp, FiThumbsDown } from \"react-icons/fi\";\r\nimport defaultAvatar from \"../img/defaultAvatar.png\";\r\n//Re-usable component\r\nexport interface WriteReviewFormValues {\r\n    opinion: string;\r\n}\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextArea = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <textarea\r\n                data-testid={label}\r\n                className=\"createReviewTextArea\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst WriteReview: React.FC<\r\n    WriteReviewFormProps & InjectedFormProps<{}, WriteReviewFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        //onSubmit's default param is any\r\n        //event.preventDefault() is automatically called with handleSubmit, a redux-form property\r\n        //form values are the values from the fields that redux-form automatiacally passes\r\n        //after clicking the submit button\r\n        //dispatch(reset(\"registerForm\"));\r\n        props.onSubmit(formValues);\r\n\r\n        //dispatch(change(\"registerForm\", \"password\", \"\"));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form\r\n                className=\"reviewForm\"\r\n                data-testid=\"registerForm\"\r\n                onSubmit={props.handleSubmit(onSubmit)}\r\n            >\r\n                <div className=\"reviewSectionsWrap\">\r\n                    <div className=\"reviewFieldTitleWrap\">\r\n                        <h1 className=\"writeAReviewTitle\">\r\n                            {`Write A Review ${\r\n                                !props.authStatus\r\n                                    ? `(as anonymous; sign-in to remove anonymity)`\r\n                                    : ``\r\n                            }`}\r\n                        </h1>\r\n                        <p className=\"pleaseDescribe\">\r\n                            Please describe what you liked or disliked about\r\n                            this game and whether you recommend it to others.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {/* <div className=\"reviewAvatar\">\r\n                            <img src={defaultAvatar} alt=\"avatar\"></img>\r\n                        </div> */}\r\n                    <div className=\"reviewContentExceptAvatarWrap\">\r\n                        <div className=\"myReviewWrap\">\r\n                            <Field\r\n                                name=\"opinion\"\r\n                                label=\"opinion\"\r\n                                type=\"text\"\r\n                                component={renderTextArea}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <div className=\"reviewButtonsSection\">\r\n                                <p className=\"doYouRecommend\">\r\n                                    Do you recommend this game?{\" \"}\r\n                                </p>\r\n                                <div className=\"reviewButtonsWrap\">\r\n                                    <div className=\"recommendOrNotButtonsWrap\">\r\n                                        {/* https://stackoverflow.com/questions/41590766/redux-form-always-validates-even-on-a-normal-button-press */}\r\n                                        {/* By adding type=\"button\" the button will not be a \"submit\" button */}\r\n                                        <button\r\n                                            className={`recommendOrNotButton ${\r\n                                                props.recommend\r\n                                                    ? `recommendOrNotButtonClicked`\r\n                                                    : ``\r\n                                            }`}\r\n                                            type=\"button\"\r\n                                            onClick={() =>\r\n                                                props.onRecommendorNot(true)\r\n                                            }\r\n                                        >\r\n                                            <FiThumbsUp />\r\n                                            <p> Yes</p>\r\n                                        </button>\r\n                                        <button\r\n                                            className={`recommendOrNotButton ${\r\n                                                !props.recommend\r\n                                                    ? `recommendOrNotButtonClicked`\r\n                                                    : ``\r\n                                            }`}\r\n                                            type=\"button\"\r\n                                            onClick={() =>\r\n                                                props.onRecommendorNot(false)\r\n                                            }\r\n                                        >\r\n                                            <FiThumbsDown />\r\n                                            <p>No</p>\r\n                                        </button>\r\n                                    </div>\r\n                                    <button\r\n                                        className=\"postReviewButton\"\r\n                                        data-testid=\"postReviewButton\"\r\n                                    >\r\n                                        Post Review\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                        {props.authStatus}\r\n                    </h3>\r\n                </div>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst validate = (\r\n    formValues: WriteReviewFormValues\r\n): FormErrors<WriteReviewFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<WriteReviewFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    if (!formValues.opinion) {\r\n        //user did not enter title, so undefined\r\n        errors.opinion = \"You must enter a review\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        //authStatus: state.authStatus.errorMessage,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps)(\r\n    reduxForm<{}, WriteReviewFormProps>({\r\n        form: \"writeReview\",\r\n        validate,\r\n    })(WriteReview)\r\n);\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALgAAAC4CAIAAADfUbGQAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTnU1rJkAAAF4UlEQVR4Xu3dsUtjWRTH8f1bBLsUglVKqzRCKgMprAzYipDCTkiRKkXAzkJIZyHYWQh2gpBSECwDgqUQsBPcu/ib3WFZx3Pee+vk3vP9FAPDcK8h52teEuOdP9YAA0KBCaHAhFBgQigwIRSYEApMCAUmhAITQoEJocCEUGBCKDAhFJgQCkwIBSaEAhNCgQmhwIRQYEIoMCEUmBAKTAgFJoQCE0KBCaHAhFBgQigwIRSYEApMCAUmhAITQoEJocCEUGBCKDAhFJgQCkwIBSaEAhNCgQmhwCR0KOvr6/1+fzQanZyc3P2wXC7f39/Tn/r73V361+FwuL29rWUhRQyl2+2m2c/n8xSEy+vr683NzXg83tra0l5hBAql0+nMZrM0bI29nsfHx1RMq9XS7qULEcre3l6aqybctMvLy52dHX2lchUeSq/X+/8S+Vm6lrXbbX3VEhUbSrooTCYTjfFbvLy8DAYDffnilBlKeiBZLBYa4Pc6PT3VjShLgaEcHh5qaL/J/f19eZeh0kL55svNZ9JlKD2q6TYVoahQ0sO+BrUCUislPa6UE8pKVfIhXYN04/JXSCi//XnJZ87Pz3UTM1dCKOnZgMayksp4zVxCKN/zllplZTxZyT6U4+NjDWSFnZyc6OZmK+9Q0neqRrHycn9QyTuU9J2qOdTz8aGT0WjU/2F3d3c6nZ6dnTV1Xcv9QSXjUNbX1zWEqp6fn4+OjjY3N7XjJ7a2tuoX+fr6qu3ylHEoacYaQiWTycT1aZL6P4hON1h7ZSjjUOqM7fDwULs43d/fawu/m5sb7ZKhXENJlwPd/X6VK/lQOdCsrz65hlL5ulP/rdI67+91u13tkptcQ7m4uNB979TIy9TZbKbtnMbjsbbITa6hPDw86L73aOo1aqfT0Y5O19fX2iI3WYZS+YVxg79mUe2Zynw+1/rcZBlKv9/XHe+RRqv1Tah89dH63GQZyv7+vu51j2bfG51Op9rXSetzk2Uo1YaU8tL6JgyHQ+3rpPW5CRRKumBpfRN2d3e1r5PW5ybLUKq9Nk5PgbW+CVx6MnB3d6d73UOLG0IoMDk7O9PknbQ+N4RSUbX3UZ6enrQ+N4RSxc7OjibvlC6a2iI3hFLF5eWlJu+U7+fcCMVtMBho7H7pRbV2yQ2h+PR6vbe3N43dic+jRNFqteqcppEuWNooQ4TiUOdzkEm+152EUKxub2818Eqa/dn19yMUk/pHJezt7WmvPBHK1+pXcnV1pb2yRShfqF9JepXU6XS0XbYI5VcaOZyn5m+HrAhC+VQjlaRNtF3mCOW/NVIJR3MVrpGDvhaLRUkn5RPKvzVSSXoCy/GhJaOSzxDKP+r8wO9vRVaSEIq02+2XlxdNu6pSK0kIRWr+KCcpuJKEUP5S/2jJsitJCKWB84yLryQhlLrnGUeoJIkeysHBgQZeSZBKkuihPD8/a+Z+cSpJQodS5wDSUJUkoUOp/OwkWiVJ3FB+4wGkOYobyng81tidJpOJtogkbijz+VyT90hPfuP8N/s/CxpK5XMlsz7Pvo6goVQ7VzI9nGh9PEFDGY1GGr7HbDbT+niChlLtvKSsfye0pqChVDsFbmNjQ+vjCRpKhZc8y+VSi0MKGoqG75HvqVqNIBQrQolIw/cglIg0fI/0QkmLQyIUq+l0qsUhEYoVoUSk4XsQSkQavgehRKThexAK8DVCgQmhwIRQYEIoMCEUmBAKTIKGovdGnLQ4JEJx0OKQCMVBi0MiFActDolQHLQ4JEJx0OKQCMVBi0MiFActDolQHLQ4JEJx0OKQCMVBi0MiFActDolQHLQ4JEJx0OKQCMVBi0MiFActDolQHLQ4JEJx0OKQgoYCL0KBCaHAhFBgQigwIRSYEApMCAUmhAITQoEJocCEUGBCKDAhFJgQCkwIBSaEAhNCgQmhwIRQYEIoMCEUmBAKTAgFJoQCE0KBCaHAhFBgQigwIRSYEApMCAUmhAITQoEJocCEUGBCKDAhFJgQCgzW1v4EZzXuuzS1nLIAAAAASUVORK5CYII=\"","import React, { ComponentType, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { EditReviewFormProps } from \"./GameInfo\";\r\nimport { FiThumbsUp, FiThumbsDown } from \"react-icons/fi\";\r\n//Re-usable component\r\nexport interface EditReviewFormValues {\r\n    opinion: string;\r\n}\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextArea = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <textarea\r\n                data-testid={label}\r\n                className=\"createReviewTextArea\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst EditReview: React.FC<\r\n    EditReviewFormProps & InjectedFormProps<{}, EditReviewFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        //onSubmit's default param is any\r\n        //event.preventDefault() is automatically called with handleSubmit, a redux-form property\r\n        //form values are the values from the fields that redux-form automatiacally passes\r\n        //after clicking the submit button\r\n        //dispatch(reset(\"registerForm\"));\r\n        props.onSubmit(formValues);\r\n\r\n        //dispatch(change(\"registerForm\", \"password\", \"\"));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form\r\n                className=\"reviewForm editForm\"\r\n                data-testid=\"editFOrm\"\r\n                onSubmit={props.handleSubmit(onSubmit)}\r\n            >\r\n                <div className=\"reviewSectionsWrap\">\r\n                    <div className=\"reviewFieldTitleWrap\">\r\n                        <h1 className=\"writeAReviewTitle\">Your Review</h1>\r\n                        <p className=\"pleaseDescribe\">\r\n                            Please describe what you liked or disliked about\r\n                            this game and whether you recommend it to others.\r\n                        </p>\r\n                    </div>\r\n\r\n                    <div className=\"myReviewWrap\">\r\n                        <Field\r\n                            name=\"opinion\"\r\n                            label=\"opinion\"\r\n                            type=\"text\"\r\n                            component={renderTextArea}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <div className=\"reviewButtonsSection\">\r\n                            <p className=\"doYouRecommend\">\r\n                                Do you recommend this game?\r\n                            </p>\r\n                            <div className=\"reviewButtonsWrap\">\r\n                                <div className=\"recommendOrNotButtonsWrap\">\r\n                                    {/* https://stackoverflow.com/questions/41590766/redux-form-always-validates-even-on-a-normal-button-press */}\r\n                                    {/* By adding type=\"button\" the button will not be a \"submit\" button */}\r\n                                    <button\r\n                                        className={`recommendOrNotButton ${\r\n                                            props.recommend\r\n                                                ? `recommendOrNotButtonClicked`\r\n                                                : ``\r\n                                        }`}\r\n                                        type=\"button\"\r\n                                        onClick={() =>\r\n                                            props.onRecommendorNot(true)\r\n                                        }\r\n                                    >\r\n                                        <FiThumbsUp />\r\n                                        <p> Yes</p>\r\n                                    </button>\r\n                                    <button\r\n                                        className={`recommendOrNotButton ${\r\n                                            !props.recommend\r\n                                                ? `recommendOrNotButtonClicked`\r\n                                                : ``\r\n                                        }`}\r\n                                        type=\"button\"\r\n                                        onClick={() =>\r\n                                            props.onRecommendorNot(false)\r\n                                        }\r\n                                    >\r\n                                        <FiThumbsDown />\r\n                                        <p>No</p>\r\n                                    </button>\r\n                                </div>\r\n                                <div>\r\n                                    <button\r\n                                        className=\"editAndDeleteReviewButton deleteReviewButton\"\r\n                                        type=\"button\"\r\n                                        onClick={() => props.onDelete()}\r\n                                    >\r\n                                        Delete Review\r\n                                    </button>\r\n\r\n                                    <button className=\"editAndDeleteReviewButton\">\r\n                                        Edit Review\r\n                                    </button>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                        {props.authStatus}\r\n                    </h3>\r\n                </div>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst validate = (\r\n    formValues: EditReviewFormValues\r\n): FormErrors<EditReviewFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<EditReviewFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    if (!formValues.opinion) {\r\n        //user did not enter title, so undefined\r\n        errors.opinion = \"You must enter a review\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\nexport default connect()(\r\n    reduxForm<{}, EditReviewFormProps>({\r\n        form: \"editReview\",\r\n        validate,\r\n        enableReinitialize: true,\r\n    })(EditReview)\r\n);\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport history from \"../browserHistory\";\r\nimport GameInfoCarousel from \"./GameInfoCarousel\";\r\nimport WriteReview, { WriteReviewFormValues } from \"./WriteReview\";\r\nimport { FiThumbsUp, FiThumbsDown } from \"react-icons/fi\";\r\nimport {\r\n    fetchGameInfo,\r\n    Game,\r\n    Reviewer,\r\n    fetchGameInfoReviews,\r\n    postReview,\r\n    editReview,\r\n    deleteReview,\r\n} from \"../actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport Loading from \"./Loading\";\r\nimport { ErrorStateResponse } from \"reducers/errorReducer\";\r\nimport { GameInfoStateResponse } from \"reducers/gameInfoReducer\";\r\nimport defaultAvatar from \"../img/defaultAvatar.png\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport moment from \"moment\";\r\nimport { GameInfoReviewsStateResponse } from \"reducers/gameInfoReviewsReducer\";\r\nimport _ from \"lodash\";\r\nimport EditReview from \"./EditReview\";\r\nimport jwt_decode from \"jwt-decode\";\r\nimport Cookies from \"js-cookie\";\r\nimport { ACCESS_TOKEN } from \"../constants\";\r\nimport CartAndSearchbar from \"./CartAndSearchbar\";\r\nexport interface WriteReviewFormProps {\r\n    onSubmit(formValues: any): void;\r\n    authStatus?: string | null;\r\n    onRecommendorNot(response: boolean): void;\r\n    recommend: boolean;\r\n}\r\n\r\nexport interface EditReviewFormProps {\r\n    onSubmit(formValues: any): void;\r\n    onDelete(): void;\r\n    authStatus?: string | null;\r\n    onRecommendorNot(response: boolean): void;\r\n    recommend: boolean;\r\n}\r\n\r\nexport interface GameInfoCarouselProps {\r\n    screenshots: string[];\r\n}\r\ninterface GameInfoProps {\r\n    fetchGameInfo(gameId: number): void;\r\n    fetchGameInfoReviews(gameId: number): void;\r\n    postReview(formValues: IPostAndEditReview, gameId: number): void;\r\n    editReview(formValues: IPostAndEditReview, gameId: number): void;\r\n    deleteReview(gameId: number): void;\r\n    errors: ErrorStateResponse;\r\n    gameInfo: GameInfoStateResponse;\r\n    gameInfoReviews: GameInfoReviewsStateResponse;\r\n    match: any;\r\n}\r\n\r\nexport interface IPostAndEditReview {\r\n    opinion: string;\r\n    recommend: boolean;\r\n}\r\nconst GameInfo: React.FC<GameInfoProps> = (props) => {\r\n    //cart: https://javascript.plainenglish.io/creating-a-persistent-cart-in-react-f287ed4b4df0\r\n    let [cart, setCart] = useState<[]>([]);\r\n    let localCart = localStorage.getItem(\"cart\");\r\n\r\n    const addItem = (item: Game) => {\r\n        //create a copy of our cart state, avoid overwritting existing state\r\n        let cartCopy: any = [...cart];\r\n\r\n        //assuming we have an ID field in our item\r\n        let { game_id } = item;\r\n\r\n        //look for item in cart array\r\n        let existingItem = cartCopy.find(\r\n            (cartItem: Game) => cartItem.game_id === game_id\r\n        );\r\n\r\n        //if item already exists\r\n\r\n        if (existingItem) {\r\n        } else {\r\n            //if item doesn't exist, simply add it\r\n            cartCopy.push(item);\r\n        }\r\n\r\n        //update app state\r\n        setCart(cartCopy);\r\n\r\n        //make cart a string and store in local space\r\n        let stringCart = JSON.stringify(cartCopy);\r\n        localStorage.setItem(\"cart\", stringCart);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (localCart != null) {\r\n            let parsedLocalCart = JSON.parse(localCart);\r\n            //load persisted cart into state if it exists\r\n            // console.log(parsedLocalCart);\r\n            setCart(parsedLocalCart);\r\n        }\r\n    }, []);\r\n    const itemEls = useRef(new Array());\r\n    //Using refs when you have a dynamic list: https://mattclaffey.medium.com/adding-react-refs-to-an-array-of-items-96e9a12ab40c\r\n    //normal [] would not wrok.\r\n    useEffect(() => {\r\n        props.fetchGameInfo(props.match.params.gameId);\r\n        props.fetchGameInfoReviews(props.match.params.gameId);\r\n    }, []);\r\n    useEffect(() => {\r\n        //This is used for to control thumbs up or thumbs down button\r\n        if (props.gameInfoReviews.data) {\r\n            if (Cookies.get(ACCESS_TOKEN)) {\r\n                //If user is signed in\r\n                //@ts-ignore\r\n                const email = jwt_decode(Cookies.get(ACCESS_TOKEN)).subject;\r\n                const filteredContent = _.filter(\r\n                    props.gameInfoReviews.data?.reviews,\r\n                    {\r\n                        email: email,\r\n                    }\r\n                );\r\n                if (filteredContent.length > 0) {\r\n                    //@ts-ignore\r\n                    setRecommend(filteredContent[0].recommend);\r\n                }\r\n            }\r\n        }\r\n        // itemEls.current[0]?.scrollIntoView({ behavior: \"smooth\" });\r\n    }, [props.gameInfoReviews.data]);\r\n    const [recommend, setRecommend] = useState(true);\r\n\r\n    const onRecommendorNot = (response: boolean) => {\r\n        if (response) setRecommend(true);\r\n        else setRecommend(false);\r\n    };\r\n\r\n    const renderWriteReview = () => {\r\n        if (Cookies.get(ACCESS_TOKEN)) {\r\n            //If user is signed in\r\n            //@ts-ignore\r\n            const email = jwt_decode(Cookies.get(ACCESS_TOKEN)).subject;\r\n\r\n            const filteredContent = _.filter(\r\n                props.gameInfoReviews.data?.reviews,\r\n                {\r\n                    email: email,\r\n                }\r\n            );\r\n            //If user already wrote a review,\r\n            if (filteredContent.length > 0) {\r\n                return null;\r\n            } else {\r\n                return (\r\n                    <WriteReview\r\n                        recommend={recommend}\r\n                        onRecommendorNot={onRecommendorNot}\r\n                        onSubmit={(formValues: any) =>\r\n                            onSubmitPostReview(formValues)\r\n                        }\r\n                    />\r\n                );\r\n            }\r\n        } else {\r\n            //If user is not signed in\r\n            return (\r\n                <WriteReview\r\n                    recommend={recommend}\r\n                    onRecommendorNot={onRecommendorNot}\r\n                    onSubmit={(formValues: any) =>\r\n                        onSubmitPostReview(formValues)\r\n                    }\r\n                />\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderEditReview = () => {\r\n        if (Cookies.get(ACCESS_TOKEN)) {\r\n            //If user is signed in\r\n            //@ts-ignore\r\n            const email = jwt_decode(Cookies.get(ACCESS_TOKEN)).subject;\r\n            const filteredContent = _.filter(\r\n                props.gameInfoReviews.data?.reviews,\r\n                {\r\n                    email: email,\r\n                }\r\n            );\r\n\r\n            //If user already wrote a review\r\n            if (filteredContent.length > 0) {\r\n                return (\r\n                    <EditReview\r\n                        recommend={recommend}\r\n                        onRecommendorNot={onRecommendorNot}\r\n                        onSubmit={(formValues: any) =>\r\n                            onSubmitEditReview(formValues)\r\n                        }\r\n                        onDelete={onSubmitDeleteReview}\r\n                        initialValues={{\r\n                            //@ts-ignore  typescript has issues with lodash's ._filter because they use flat array\r\n                            opinion: filteredContent[0].opinion,\r\n                        }}\r\n                    />\r\n                );\r\n            }\r\n        }\r\n    };\r\n\r\n    const renderPrice = (game: Game) => {\r\n        if (parseFloat(game.discount_percentage) > 0) {\r\n            return (\r\n                <div className=\"gameInfoAdjustedPriceWrap\">\r\n                    <div className=\"gameInfoDiscount\">\r\n                        <p>-{parseFloat(game.discount_percentage) * 100}%</p>\r\n                    </div>\r\n                    <div className=\"gameInfoPriceStrikedAndPriceWrap\">\r\n                        <p className=\"gameInfoOrigPriceStriked\">\r\n                            ${parseFloat(game.price).toFixed(2)}\r\n                        </p>\r\n                        <p className=\"gameInfoPrice\">\r\n                            ${parseFloat(game.price_after_discount).toFixed(2)}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            //no discount\r\n            return (\r\n                <div className=\"chartGamePriceInnerWrap\">\r\n                    <p className=\"chartGamePrice\">\r\n                        ${parseFloat(game.price).toFixed(2)}\r\n                    </p>\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderThumbIconForReview = (recommend: boolean) => {\r\n        if (recommend) {\r\n            return (\r\n                <React.Fragment>\r\n                    <FiThumbsUp className=\"reviewerThumbIcon\" />\r\n                    <p className=\"reviewerVerdict\">Recommended</p>\r\n                </React.Fragment>\r\n            );\r\n        } else {\r\n            return (\r\n                <React.Fragment>\r\n                    <FiThumbsDown className=\"reviewerThumbIcon\" />\r\n                    <p className=\"reviewerVerdict\">Not Recommended</p>\r\n                </React.Fragment>\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderReviews = (reviews: Reviewer[]) => {\r\n        if (reviews.length === 0) {\r\n            return (\r\n                <h1 className=\"noReviews\">\r\n                    There are no reviews for this game.\r\n                </h1>\r\n            );\r\n        }\r\n        return reviews.map((review, index) => {\r\n            return (\r\n                <div\r\n                    key={index}\r\n                    className=\"reviewBox\"\r\n                    // ref={(element) =>\r\n                    //     index === 0 ? (itemEls.current[index] = element) : null\r\n                    // }\r\n                    ref={(element) => (itemEls.current[index] = element)}\r\n                >\r\n                    <div className=\"reviewerInfoWrap\">\r\n                        <div className=\"reviewerAvatarWrap\">\r\n                            <img\r\n                                src={\r\n                                    review.avatar_url\r\n                                        ? review.avatar_url\r\n                                        : defaultAvatar\r\n                                }\r\n                                alt=\"avatar\"\r\n                                onError={(e: any) => {\r\n                                    e.target.src = defaultAvatar; // some replacement image\r\n                                    // e.target.style = 'padding: 8px; margin: 16px' // inline styles in html format\r\n                                }}\r\n                            ></img>\r\n                        </div>\r\n                        <p className=\"reviewerUsername\">\r\n                            {review.username\r\n                                ? review.username\r\n                                : `Anonymous User`}\r\n                        </p>\r\n                    </div>\r\n                    <div className=\"reviewerReviewWrap\">\r\n                        <div className=\"reviewerVerdictWrap\">\r\n                            {renderThumbIconForReview(review.recommend)}\r\n                        </div>\r\n                        <p className=\"reviewerDesc\">{review.opinion}</p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        });\r\n    };\r\n\r\n    const onSubmitPostReview = (formValues: WriteReviewFormValues) => {\r\n        const recommendObj = { recommend: recommend };\r\n        const updatedObj: IPostAndEditReview = Object.assign(\r\n            formValues,\r\n            recommendObj\r\n        );\r\n        props.postReview(updatedObj, props.match.params.gameId);\r\n        itemEls.current[0]?.scrollIntoView({ behavior: \"smooth\" });\r\n    };\r\n\r\n    const onSubmitEditReview = (formValues: WriteReviewFormValues) => {\r\n        const recommendObj = { recommend: recommend };\r\n        const updatedObj: IPostAndEditReview = Object.assign(\r\n            formValues,\r\n            recommendObj\r\n        );\r\n        props.editReview(updatedObj, props.match.params.gameId);\r\n\r\n        if (Cookies.get(ACCESS_TOKEN)) {\r\n            //If user is signed in\r\n            //@ts-ignore\r\n            const email = jwt_decode(Cookies.get(ACCESS_TOKEN)).subject;\r\n            const editedReviewIndex = _.findIndex(\r\n                props.gameInfoReviews.data?.reviews,\r\n                {\r\n                    //@ts-ignore issue with lodash\r\n                    email: email,\r\n                }\r\n            );\r\n\r\n            itemEls.current[editedReviewIndex]?.scrollIntoView({\r\n                behavior: \"smooth\",\r\n            });\r\n        }\r\n    };\r\n\r\n    const onSubmitDeleteReview = () => {\r\n        props.deleteReview(props.match.params.gameId);\r\n    };\r\n\r\n    const renderContent = () => {\r\n        if (props.errors.data?.error) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">\r\n                        {props.errors.data?.error}\r\n                    </h3>\r\n                </div>\r\n            );\r\n        } else if (props.gameInfo.data && props.gameInfoReviews.data) {\r\n            if (props.gameInfo.data.games.length > 0)\r\n                //A review can be empty but the game info CANNOT be empty\r\n                return (\r\n                    <div className=\"gameInfoContainer\">\r\n                        <CartAndSearchbar />\r\n\r\n                        <h1 className=\"gameInfoTitle\">\r\n                            {props.gameInfo.data.games[0].title}\r\n                        </h1>\r\n                        <div className=\"gameInfoShowcaseContainer\">\r\n                            <div className=\"gameInfoShowcasePreviewWrap\">\r\n                                <img\r\n                                    className=\"gameInfoShowcaseTitleImage\"\r\n                                    src={props.gameInfo.data.games[0].cover_url}\r\n                                    alt=\"\"\r\n                                    onLoad={() => {\r\n                                        anime({\r\n                                            targets: `.gameInfoShowcaseTitleImage`,\r\n\r\n                                            opacity: [\r\n                                                {\r\n                                                    value: [0, 1],\r\n                                                    duration: 250,\r\n                                                    easing: \"easeOutQuad\",\r\n                                                },\r\n                                            ],\r\n                                        });\r\n                                    }}\r\n                                ></img>\r\n                                <div className=\"gameInfoShowcaseTextWrap\">\r\n                                    <p className=\"showcaseAbout\">\r\n                                        {props.gameInfo.data.games[0].about}\r\n                                    </p>\r\n                                    <p className=\"releaseDate\">\r\n                                        {`Release Date -  ${moment(\r\n                                            props.gameInfo.data.games[0]\r\n                                                .release_date\r\n                                        ).format(\"YYYY/MM/DD\")}`}\r\n                                    </p>\r\n                                    <div className=\"gameInfoGenresWrap\">\r\n                                        {props.gameInfo.data.games[0].genres.map(\r\n                                            (genre, index) => {\r\n                                                return (\r\n                                                    <p\r\n                                                        key={index}\r\n                                                        className=\"gameInfoGenreTag\"\r\n                                                    >\r\n                                                        {genre}\r\n                                                    </p>\r\n                                                );\r\n                                            }\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"gameInfoShowcaseCarouselWrap\">\r\n                                <GameInfoCarousel\r\n                                    screenshots={\r\n                                        props.gameInfo.data.games[0].screenshots\r\n                                    }\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {renderWriteReview()}\r\n                        <div className=\"gameInfoBuyContainer\">\r\n                            <h1>Buy {props.gameInfo.data.games[0].title}</h1>\r\n                            <div className=\"gameInfoAddToCartWrap\">\r\n                                <div className=\"gameInfoPriceWrap\">\r\n                                    {renderPrice(props.gameInfo.data.games[0])}\r\n                                </div>\r\n                                <button\r\n                                    className=\"gameInfoAddToCartButton\"\r\n                                    data-testid=\"addToCartbutton\"\r\n                                    onClick={() => {\r\n                                        if (props.gameInfo.data?.games)\r\n                                            addItem(\r\n                                                props.gameInfo.data.games[0]\r\n                                            );\r\n                                        history.push(\"/cart\");\r\n                                    }}\r\n                                >\r\n                                    Add To Cart\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <h1 className=\"gameInfoSectionTitle\">\r\n                            About This Game\r\n                        </h1>\r\n                        <p className=\"gameDescription\">\r\n                            {props.gameInfo.data.games[0].about}\r\n                        </p>\r\n                        <h1 className=\"gameInfoSectionTitle\">Recent Reviews</h1>\r\n                        {renderEditReview()}\r\n                        <div className=\"reviewsContainer\">\r\n                            {renderReviews(props.gameInfoReviews.data.reviews)}\r\n                        </div>\r\n                    </div>\r\n                );\r\n            else {\r\n                return (\r\n                    <div className=\"loadingCenter\">\r\n                        <Loading />\r\n                    </div>\r\n                );\r\n            }\r\n        } else {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    return <React.Fragment>{renderContent()}</React.Fragment>;\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        gameInfo: state.gameInfo,\r\n        gameInfoReviews: state.gameInfoReviews,\r\n        errors: state.errors,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    fetchGameInfo,\r\n    fetchGameInfoReviews,\r\n    postReview,\r\n    editReview,\r\n    deleteReview,\r\n})(GameInfo);\r\n","import { Game } from \"actions\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Router } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport CartAndSearchbar from \"./CartAndSearchbar\";\r\nconst Cart: React.FC<{}> = () => {\r\n    let [cart, setCart] = useState<[]>([]);\r\n    let localCart = localStorage.getItem(\"cart\");\r\n    const removeItem = (gameId: number) => {\r\n        //create cartCopy\r\n        let cartCopy: any = [...cart];\r\n\r\n        cartCopy = cartCopy.filter((item: Game) => item.game_id != gameId);\r\n\r\n        //update state and local\r\n        setCart(cartCopy);\r\n\r\n        let cartString = JSON.stringify(cartCopy);\r\n        localStorage.setItem(\"cart\", cartString);\r\n    };\r\n\r\n    useEffect(() => {\r\n        if (localCart != null) {\r\n            let parsedLocalCart = JSON.parse(localCart);\r\n            //load persisted cart into state if it exists\r\n            // console.log(parsedLocalCart);\r\n            setCart(parsedLocalCart);\r\n        }\r\n    }, []);\r\n\r\n    const renderPrice = (game: Game) => {\r\n        if (parseFloat(game.discount_percentage) > 0) {\r\n            return (\r\n                <div className=\"gameInfoAdjustedPriceWrap\">\r\n                    <div>\r\n                        <p className=\"gameInfoOrigPriceStriked\">\r\n                            ${parseFloat(game.price).toFixed(2)}\r\n                        </p>\r\n                        <p className=\"cartPrice\">\r\n                            ${parseFloat(game.price_after_discount).toFixed(2)}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            //no discount\r\n            return (\r\n                <p className=\"cartPrice\">\r\n                    ${parseFloat(game.price).toFixed(2)}\r\n                </p>\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderCartRows = () => {\r\n        if (cart.length === 0) {\r\n            <h1 className=\"emptyCart\">Your cart is empty</h1>;\r\n        }\r\n        return cart.map((game: Game, index) => {\r\n            return (\r\n                <div className=\"cartRow\" key={index}>\r\n                    <div className=\"cartImageAndTitleWrap\">\r\n                        <div\r\n                            className={`cartGameImage cartGameImage${index}`}\r\n                            onLoad={() => {\r\n                                anime({\r\n                                    targets: `.cartGameImage${index}`,\r\n                                    // Properties\r\n                                    // Animation Parameters\r\n\r\n                                    opacity: [\r\n                                        {\r\n                                            value: [0, 1],\r\n                                            duration: 250,\r\n                                            easing: \"easeOutQuad\",\r\n                                        },\r\n                                    ],\r\n                                });\r\n                            }}\r\n                        >\r\n                            <img src={game.cover_url} alt=\"game\"></img>\r\n                        </div>\r\n                        <p className=\"cartTitle\">{game.title}</p>\r\n                    </div>\r\n                    <div className=\"cartPriceAndRemoveWrap\">\r\n                        {/* <p className=\"cartPrice\">\r\n                            ${item.price_after_discount}\r\n                        </p> */}\r\n                        {renderPrice(game)}\r\n                        <p\r\n                            className=\"removeFromCart\"\r\n                            data-testid=\"removeCart\"\r\n                            onClick={() => {\r\n                                removeItem(game.game_id);\r\n                            }}\r\n                        >\r\n                            Remove\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        });\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <div className=\"cartHeaderContainer\">\r\n                <CartAndSearchbar />\r\n                <h1 className=\"cartHeader\">Your shopping cart</h1>\r\n            </div>\r\n            <div className=\"cartContainer\">\r\n                {renderCartRows()}\r\n                <div className=\"totalContainer\">\r\n                    <div className=\"totalTextWrap\">\r\n                        <p className=\"estimatedTotal\">Estimated Total</p>\r\n                        <p className=\"totalPrice\">\r\n                            $\r\n                            {cart\r\n                                .reduce((acc: any, curr: Game) => {\r\n                                    console.log(curr);\r\n                                    return (\r\n                                        parseFloat(acc) +\r\n                                        parseFloat(curr.price_after_discount)\r\n                                    );\r\n                                }, 0)\r\n                                .toFixed(2)}\r\n                        </p>\r\n                    </div>\r\n\r\n                    <button\r\n                        className=\"purchaseButton\"\r\n                        onClick={() => {\r\n                            alert(\r\n                                \"Let's pretend that you purchased these items!\"\r\n                            );\r\n                            localStorage.clear();\r\n                            setCart([]);\r\n                        }}\r\n                    >\r\n                        Purchase\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Cart;\r\n","import React, { ComponentType, useEffect } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    reset,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { RegisterFormProps } from \"./Register\";\r\n//Re-usable component\r\nexport interface RegisterFormValues {\r\n    email: string;\r\n    password: string;\r\n    username: string;\r\n}\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                data-testid={label}\r\n                className=\"createAuthInputs\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst renderPasswordInput = ({ input, label, meta, placeHolder }: any) => {\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                data-testid={label}\r\n                className=\"createAuthInputs\"\r\n                type=\"password\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst RegisterForm: React.FC<\r\n    RegisterFormProps & InjectedFormProps<{}, RegisterFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        //onSubmit's default param is any\r\n        //event.preventDefault() is automatically called with handleSubmit, a redux-form property\r\n        //form values are the values from the fields that redux-form automatiacally passes\r\n        //after clicking the submit button\r\n        //dispatch(reset(\"registerForm\"));\r\n        props.onSubmit(formValues);\r\n\r\n        //dispatch(change(\"registerForm\", \"password\", \"\"));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form\r\n                className=\"authForm\"\r\n                data-testid=\"registerForm\"\r\n                onSubmit={props.handleSubmit(onSubmit)}\r\n            >\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Email</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"email\"\r\n                        label=\"email\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Password</h1>\r\n                    </div>\r\n                    <Field\r\n                        name=\"password\"\r\n                        label=\"password\"\r\n                        type=\"password\"\r\n                        component={renderPasswordInput}\r\n                    />\r\n                </div>\r\n\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"authFormFieldTitleWrap\">\r\n                        <h1>Username (Will be shown to other users)</h1>\r\n                    </div>\r\n                    <Field\r\n                        name=\"username\"\r\n                        label=\"username\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                    />\r\n                </div>\r\n\r\n                <button className=\"authButton\" data-testid=\"registerButton\">\r\n                    Continue\r\n                </button>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst validate = (\r\n    formValues: RegisterFormValues\r\n): FormErrors<RegisterFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<RegisterFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    if (!formValues.email) {\r\n        //user did not enter title, so undefined\r\n        errors.email = \"You must enter an email\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n    if (!formValues.password) {\r\n        errors.password = \"You must enter a password\";\r\n    }\r\n\r\n    if (!formValues.username) {\r\n        errors.username = \"You must enter a username\";\r\n    }\r\n\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.errorMessage,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps)(\r\n    reduxForm<{}, RegisterFormProps>({\r\n        form: \"registerForm\",\r\n        validate,\r\n    })(RegisterForm)\r\n);\r\n","import React from \"react\";\r\nimport RegisterForm, { RegisterFormValues } from \"./RegisterForm\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport { signUp } from \"../actions\";\r\nexport interface RegisterFormProps {\r\n    onSubmit(formValues: any): void;\r\n    authStatus?: string | null;\r\n}\r\n\r\nexport interface RegisterPlanProps {\r\n    signUp(formValues: any): void;\r\n    authStatus?: string | null;\r\n}\r\n\r\nconst Register: React.FC<RegisterPlanProps> = (props) => {\r\n    const onSubmitRegister = async (formValues: RegisterFormValues) => {\r\n        props.signUp(formValues);\r\n    };\r\n\r\n    return (\r\n        <div className=\"registerContainer\">\r\n            <div className=\"registerContentWrap\">\r\n                <h1 className=\"createYourAccountHeader\">Create your account</h1>\r\n                <RegisterForm\r\n                    onSubmit={(formValues: any) => onSubmitRegister(formValues)}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.authenticated,\r\n    };\r\n};\r\nexport default connect(mapStateToProps, { signUp })(Register);\r\n","import React, { ComponentType, useEffect } from \"react\";\r\nimport { Field, reduxForm, FormErrors, InjectedFormProps } from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\n\r\nimport { SignInFormProps } from \"./SignIn\";\r\n//Re-usable component\r\nexport interface SignInFormValues {\r\n    email: string;\r\n    password: string;\r\n}\r\n\r\n//Typescriptand redux form:\r\n//https://levelup.gitconnected.com/react-js-typescript-redux-redux-form-jest-e522995ebe36\r\n\r\n//Need to hoist render methods up or else it will give error where it will unfocus after first characther is typed\r\n//https://stackoverflow.com/questions/39839051/using-redux-form-im-losing-focus-after-typing-the-first-character\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderTextInput = ({ input, label, meta, placeholder }: any) => {\r\n    //\"component\" property automatically passes props to argument, it has {input properties and meta properties}\r\n    //\"label\" automatically passes props to arguments\r\n\r\n    return (\r\n        <div>\r\n            {/* <label>{input.placeHolder}</label> */}\r\n            <input\r\n                className=\"signInTextInput\"\r\n                data-testid={label}\r\n                placeholder={placeholder}\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n    //{..input} is shortcut for redux-form; where you take all the input from \"component's\" props and pass it as\r\n    //props to <input>\r\n};\r\n\r\nconst renderPasswordInput = ({ input, label, meta, placeholder }: any) => {\r\n    return (\r\n        <div>\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                className=\"signInTextInput\"\r\n                data-testid={label}\r\n                placeholder={placeholder}\r\n                type=\"password\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst SignInForm: React.FC<\r\n    SignInFormProps & InjectedFormProps<{}, SignInFormProps>\r\n> = (props) => {\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        props.onSubmit(formValues);\r\n        // dispatch(change(\"signInForm\", \"password\", \"\"));\r\n    };\r\n\r\n    return (\r\n        <React.Fragment>\r\n            <form\r\n                className=\"signInForm\"\r\n                data-testid=\"signInForm\"\r\n                onSubmit={props.handleSubmit(onSubmit)}\r\n            >\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"signInFormFieldTitleWrap\">\r\n                        <h1>Email</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"email\"\r\n                        label=\"email\"\r\n                        type=\"text\"\r\n                        component={renderTextInput}\r\n                        placeholder=\"Email\"\r\n                    />\r\n                </div>\r\n                <div className=\"authFieldSection\">\r\n                    <div className=\"signInFormFieldTitleWrap\">\r\n                        <h1>Password</h1>\r\n                        <h3 className=\"authFormFieldTitleEmailInUse\">\r\n                            {props.authStatus}\r\n                        </h3>\r\n                    </div>\r\n                    <Field\r\n                        name=\"password\"\r\n                        label=\"password\"\r\n                        type=\"password\"\r\n                        placeholder=\"Password\"\r\n                        component={renderPasswordInput}\r\n                    />\r\n                </div>\r\n\r\n                <button className=\"signInButton\" data-testid=\"signInButton\">\r\n                    Sign In\r\n                </button>\r\n            </form>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nconst validate = (\r\n    formValues: SignInFormValues\r\n): FormErrors<SignInFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<SignInFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    if (!formValues.email) {\r\n        //user did not enter title, so undefined\r\n        errors.email = \"You must enter an email\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n    if (!formValues.password) {\r\n        errors.password = \"You must enter a password\";\r\n    }\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.errorMessage,\r\n    };\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    {}\r\n)(\r\n    reduxForm<{}, SignInFormProps>({\r\n        form: \"signInForm\",\r\n        validate,\r\n    })(SignInForm)\r\n);\r\n","export default __webpack_public_path__ + \"static/media/joinPc.28a2a871.png\";","import React from \"react\";\r\nimport history from \"../browserHistory\";\r\nimport SignInForm, { SignInFormValues } from \"./SignInForm\";\r\nimport { signIn } from \"../actions\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport joinPc from \"../img/joinPc.png\";\r\nexport interface SignInFormProps {\r\n    onSubmit(formValues: any): void;\r\n    authStatus?: string | null;\r\n}\r\n\r\nexport interface SignInProps {\r\n    signIn(formValues: any): void;\r\n    authStatus?: string | null;\r\n}\r\n\r\nconst SignIn: React.FC<SignInProps> = (props) => {\r\n    const onSubmitSignIn = async (formValues: SignInFormValues) => {\r\n        props.signIn(formValues);\r\n    };\r\n\r\n    return (\r\n        <div className=\"signInContainer\">\r\n            <div className=\"signInSectionsWrap\">\r\n                <div className=\"signInFormSection\">\r\n                    <h1 className=\"signInTitle\">Sign In</h1>\r\n                    <SignInForm\r\n                        onSubmit={(formValues: any) =>\r\n                            onSubmitSignIn(formValues)\r\n                        }\r\n                    />\r\n                </div>\r\n                <div className=\"joinSection\">\r\n                    <p className=\"joinSteamText\">\r\n                        Join Steam and discover thousands of games to play.\r\n                    </p>\r\n                    <div className=\"joinImageWrap\">\r\n                        <img\r\n                            className=\"joinImage\"\r\n                            src={joinPc}\r\n                            alt=\"\"\r\n                            onLoad={() => {\r\n                                anime({\r\n                                    targets: `.joinImage`,\r\n                                    // Properties\r\n                                    // Animation Parameters\r\n\r\n                                    opacity: [\r\n                                        {\r\n                                            value: [0, 1],\r\n                                            duration: 100,\r\n                                            easing: \"easeOutQuad\",\r\n                                        },\r\n                                    ],\r\n                                });\r\n                            }}\r\n                        />\r\n                    </div>\r\n                    <p>It's free and easy to use.</p>\r\n                    <button\r\n                        className=\"joinSteamButton\"\r\n                        onClick={() => {\r\n                            history.push(\"/register\");\r\n                        }}\r\n                    >\r\n                        Join Steam\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        authStatus: state.authStatus.authenticated,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, { signIn })(SignIn);\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport {\r\n    Field,\r\n    reduxForm,\r\n    change,\r\n    FormErrors,\r\n    InjectedFormProps,\r\n} from \"redux-form\";\r\n//compose is used to make it easier to \"organize\" mapStateToProps and redux form\r\nimport { StoreState } from \"../reducers\";\r\nimport { connect } from \"react-redux\";\r\nimport Loading from \"./Loading\";\r\nimport { SERVER_ERROR_MESSAGE } from \"../constants\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport defaultAvatar from \"../img/defaultAvatar.png\";\r\nimport { EditProfileFormProps } from \"./Profile\";\r\nexport interface EditProfileFormValues {\r\n    username: string;\r\n    imagePreview: string;\r\n    image: any;\r\n}\r\n\r\nconst renderError = ({ error, touched }: any) => {\r\n    if (touched && error) {\r\n        //Touched (for input) will be false at first\r\n        //When clicked and then clicked otuside of the input, it will be true\r\n        return <div className=\"errorText\">{error}</div>;\r\n    }\r\n};\r\n\r\nconst renderAutoFocusTextInput = ({ input, label, meta, placeHolder }: any) => {\r\n    //I think there's a bug with the librrary\r\n    //If we have initialValues set for the form and then we don't have an autofocs on for a field\r\n    //refs such as openFileExplorer will not be generated until a text is actualy focused.\r\n    //If we remove the initialValues, refs will be rendered.\r\n    return (\r\n        <div className=\"editProfileInputsWrap\">\r\n            {/* <label>{label}</label> */}\r\n            <input\r\n                className=\"editProfileInputs\"\r\n                {...input}\r\n                autoComplete=\"off\"\r\n                autoFocus\r\n            />\r\n            {renderError(meta)}\r\n        </div>\r\n    );\r\n};\r\n\r\nconst renderFieldSectionLayout = (title: string, children: JSX.Element) => {\r\n    return (\r\n        <div className=\"editProfileFieldSection\">\r\n            <div className=\"editProfileFieldTitleWrap\">\r\n                <h1>{title}</h1>\r\n            </div>\r\n            {children}\r\n        </div>\r\n    );\r\n};\r\nconst EditProfileForm: React.FC<\r\n    EditProfileFormProps & InjectedFormProps<{}, EditProfileFormProps>\r\n> = (props) => {\r\n    const location = useLocation();\r\n    const openFileExplorer = useRef(null);\r\n    const [listingImage, setListingImage] = useState<string | null>(null);\r\n    const [cloudinaryImage, setCloudinaryImage] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        if (props.cloudinaryImage) setCloudinaryImage(props.cloudinaryImage);\r\n    }, []);\r\n\r\n    const onSubmit = (formValues: any, dispatch: any) => {\r\n        props.onSubmit(formValues);\r\n    };\r\n\r\n    const renderImageUpload = ({\r\n        input,\r\n        label,\r\n        meta,\r\n        placeHolder,\r\n        optionValues,\r\n    }: any) => {\r\n        //We cannot pass in {...input} (so that the input is submited when onSubmit button is clicked) like our other renders because <input> has type=\"file\"\r\n        //Must do this instead: https://github.com/redux-form/redux-form/issues/3686\r\n        //We do not have a name in <input> so that redux won't complain with validate (thus making this input optional)\r\n\r\n        return (\r\n            <input\r\n                type=\"file\"\r\n                accept=\"image/*\"\r\n                style={{ display: \"none\" }}\r\n                ref={openFileExplorer}\r\n                onChange={(...args) => {\r\n                    //The input's text dosen't change but the input is actually inserted (do formValues.image below)\r\n                    //  let event = args.map((val) => val.nativeEvent)[0];\r\n                    input.onChange(...args);\r\n                    //@ts-ignore\r\n                    // setListingImage(URL.createObjectURL(event.target.files[0]));\r\n                    //chagne also dosen't change the textbox input\r\n                    // props.dispatch(\r\n                    //     change(\"postAdForm\", \"image\", event.target.files[0])\r\n                    // );\r\n                }}\r\n            />\r\n        );\r\n    };\r\n\r\n    const renderImageUploadPreview = ({\r\n        input,\r\n        label,\r\n        meta,\r\n        placeHolder,\r\n        optionValues,\r\n    }: any) => {\r\n        //We cannot pass in {...input} (so that the input is submited when onSubmit button is clicked) like our other renders because <input> has type=\"file\"\r\n        //Must do this instead: https://github.com/redux-form/redux-form/issues/3686\r\n        //We do not have a name in <input> so that redux won't complain with validate (thus making this input optional)\r\n\r\n        return (\r\n            <input\r\n                type=\"button\"\r\n                {...input}\r\n                className=\"editProfileAvatar\"\r\n                onClick={() => {\r\n                    // @ts-ignore\r\n                    openFileExplorer.current.click();\r\n                }}\r\n                style={renderImage()}\r\n            />\r\n        );\r\n    };\r\n\r\n    const renderImage = () => {\r\n        if (cloudinaryImage) {\r\n            return {\r\n                backgroundImage: `url(${cloudinaryImage}), url(${defaultAvatar})`,\r\n                backgroundPosition: \"center\",\r\n                backgroundSize: \"cover\",\r\n                backgroundColor: \"rgba(58, 62, 71, 0.5);\",\r\n            };\r\n        } else if (!cloudinaryImage && listingImage) {\r\n            return {\r\n                backgroundImage: `url(${listingImage}), url(${defaultAvatar})`,\r\n                backgroundPosition: \"center\",\r\n                backgroundSize: \"cover\",\r\n                backgroundColor: \"rgba(58, 62, 71, 0.5);\",\r\n            };\r\n        } else {\r\n            return {\r\n                backgroundImage: `url(${defaultAvatar})`,\r\n            };\r\n        }\r\n    };\r\n\r\n    const renderFields = (): JSX.Element => {\r\n        return (\r\n            <form\r\n                className=\"editProfileForm\"\r\n                onSubmit={props.handleSubmit(onSubmit)}\r\n            >\r\n                {renderFieldSectionLayout(\r\n                    \"Username\",\r\n                    <Field\r\n                        name=\"username\"\r\n                        type=\"text\"\r\n                        // label=\"Ad Title\"\r\n\r\n                        component={renderAutoFocusTextInput}\r\n                    />\r\n                )}\r\n\r\n                {renderFieldSectionLayout(\r\n                    \"Avatar\",\r\n                    <React.Fragment>\r\n                        <Field\r\n                            name=\"image\"\r\n                            type=\"file\"\r\n                            component={renderImageUpload}\r\n                            //@ts-ignore dont worry\r\n                            value={listingImage}\r\n                            ref={openFileExplorer}\r\n                            withRef\r\n                            onChange={(event: any) => {\r\n                                //For some reason,\r\n                                //The input's text dosen't change but the input is actually inserted (do formValues.image below)\r\n                                setCloudinaryImage(null);\r\n                                setListingImage(\r\n                                    URL.createObjectURL(event.target.files[0])\r\n                                );\r\n                                props.change(\"imagePreview\", null);\r\n\r\n                                // console.log(\r\n                                //     `Selected file - ${event.target.files[0].name}`\r\n                                // );\r\n                                //https://medium.com/@650egor/react-30-day-challenge-day-2-image-upload-preview-2d534f8eaaa\r\n                            }}\r\n                        />\r\n                        <div className=\"imageUploadWrapper\">\r\n                            <Field\r\n                                name=\"imagePreview\"\r\n                                type=\"button\"\r\n                                component={renderImageUploadPreview}\r\n                            />\r\n\r\n                            {(listingImage || cloudinaryImage) && (\r\n                                <h3\r\n                                    className=\"removeUploadedImage\"\r\n                                    onClick={() => {\r\n                                        setListingImage(null);\r\n                                        setCloudinaryImage(null);\r\n                                        props.dispatch(\r\n                                            change(\r\n                                                \"editProfileForm\",\r\n                                                \"image\",\r\n                                                null\r\n                                            )\r\n                                        );\r\n                                        props.change(\"imagePreview\", null);\r\n                                    }}\r\n                                >\r\n                                    Remove\r\n                                </h3>\r\n                            )}\r\n                        </div>\r\n                    </React.Fragment>\r\n                )}\r\n                <div className=\"editProfileSubmitWrap\">\r\n                    <button className=\"editProfileSubmit\">Edit Profile</button>\r\n                </div>\r\n            </form>\r\n        );\r\n    };\r\n\r\n    return <React.Fragment>{renderFields()}</React.Fragment>;\r\n};\r\n\r\nconst validate = (\r\n    formValues: EditProfileFormValues\r\n): FormErrors<EditProfileFormValues> => {\r\n    //MUST BE NAMED VALIDATE! Other names would be ignored by reduxForm(..)\r\n    const errors: FormErrors<EditProfileFormValues> = {};\r\n    //If you return an empty object, redux form will assume everything is ok\r\n    // console.log(\"FILE UPLOAD VALUE\", formValues.image);\r\n    if (!formValues.username) {\r\n        //user did not enter title, so undefined\r\n        errors.username = \"You must enter a username\";\r\n        //Must be the same name as field name! The \"error\" property in {meta} would receive this\r\n    }\r\n\r\n    return errors;\r\n    //Erors is going to be passed to renderInput's meta\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        // listingDetail: state.listingInfo.data,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    // fetchCategoriesForListing\r\n})(\r\n    reduxForm<{}, EditProfileFormProps>({\r\n        form: \"editProfileForm\",\r\n        validate,\r\n        enableReinitialize: true,\r\n    })(EditProfileForm)\r\n);\r\n\r\n//enableReinitialize: true is fo:\r\n//initialState does not re-render unless we eable enableReinitialize: true (pretty sure it has to do with the current redux version because\r\n//our music video stream project work without it)\r\n//https://stackoverflow.com/questions/38881324/redux-form-initialvalues-not-updating-with-state\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { History } from \"history\";\r\nimport { validateToken } from \"../actions\";\r\nimport { useLocation } from \"react-router-dom\";\r\n\r\nimport history from \"../browserHistory\";\r\n\r\nexport interface IHoc {\r\n    authStatus?: string | null;\r\n    history: History;\r\n    validateToken(path: string, retriedCalling: boolean): void;\r\n}\r\n\r\nconst hoc = (ChildComponent: any) => {\r\n    class ComposedComponent extends Component<IHoc> {\r\n        // Our component just got rendered\r\n        //Check for redux store's authStatus\r\n        componentDidMount() {\r\n            this.shouldNavigateAway();\r\n        }\r\n\r\n        // Our component just got updated\r\n        //If our redux store's authStatus changes\r\n        componentDidUpdate() {\r\n            this.shouldNavigateAway();\r\n        }\r\n\r\n        shouldNavigateAway() {\r\n            if (!this.props.authStatus) {\r\n                //if authStatus is empty string\r\n                //history is automatically passed due to React-router\r\n                //If done loading\r\n                this.props.history.push(\"/\");\r\n            } else {\r\n                //When user enter a page,\r\n                //validate access token, if it's not valid, redux's authStatus would be empty\r\n\r\n                this.props.validateToken(\r\n                    `/api/${history.location.pathname}`,\r\n                    false\r\n                );\r\n            }\r\n        }\r\n\r\n        render() {\r\n            return <ChildComponent {...this.props} />;\r\n        }\r\n    }\r\n\r\n    function mapStateToProps(state: StoreState) {\r\n        return {\r\n            authStatus: state.authStatus.authenticated,\r\n        };\r\n    }\r\n\r\n    return connect(mapStateToProps, { validateToken })(ComposedComponent);\r\n};\r\n\r\nexport default hoc;\r\n","import { Profiler } from \"inspector\";\r\nimport React, { useState, useEffect } from \"react\";\r\nimport defaultAvatar from \"../img/defaultAvatar.png\";\r\nimport EditProfileForm from \"./EditProfileForm\";\r\nimport { fetchProfile, editProfile } from \"../actions\";\r\nimport { connect } from \"react-redux\";\r\nimport Loading from \"./Loading\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { ProfileStateResponse } from \"../reducers/profileReducer\";\r\nimport { ErrorStateResponse } from \"../reducers/errorReducer\";\r\nimport requireAuth from \"./requireAuth\";\r\n\r\nexport interface EditProfileFormProps {\r\n    onSubmit(formValues: any): void;\r\n    initialValues?: any;\r\n    dispatch?: any;\r\n    listingDetail?: any;\r\n    cloudinaryImage: string;\r\n}\r\n\r\nexport interface ProfileProps {\r\n    fetchProfile(): void;\r\n    editProfile(\r\n        formValues: any,\r\n        cloudinaryPublicId: string | null,\r\n        existingCloudinaryImagePath: string | null\r\n    ): void;\r\n    profile: ProfileStateResponse;\r\n    errors: ErrorStateResponse;\r\n}\r\n\r\nconst Profile: React.FC<ProfileProps> = (props) => {\r\n    const onSubmitEditProfile = (formValues: any) => {\r\n        // console.log(formValues);\r\n        if (props.profile.data?.profile[0].avatar_url) {\r\n            let cloudinaryPaths = props.profile.data?.profile[0].avatar_url.split(\r\n                \"/\"\r\n            );\r\n            let cloudinaryLastPath = cloudinaryPaths.pop();\r\n            //@ts-ignore\r\n            let cloudinaryPublicId = cloudinaryLastPath.split(\".\")[0];\r\n\r\n            if (formValues.image) {\r\n                //Replace existing picture with new picture\r\n                props.editProfile(formValues, cloudinaryPublicId, null);\r\n            } else {\r\n                if (formValues.imagePreview === null) {\r\n                    //user removed picture.\r\n                    //Replace existing picture with nothing\r\n\r\n                    props.editProfile(formValues, cloudinaryPublicId, null);\r\n                } else {\r\n                    //If user has an existing image already, but they did not modify  <input type=\"file\"/>\r\n                    //formValue.image will be empty. So we are going to prevent the user from\r\n                    //updating an the list with an empty image by using the cloudinary image link\r\n                    props.editProfile(\r\n                        formValues,\r\n                        cloudinaryPublicId,\r\n                        props.profile.data?.profile[0].avatar_url\r\n                    );\r\n                }\r\n            }\r\n        } else {\r\n            //If listing does not have initial cloudinary image link (because they made a listing without a picture beforehand\r\n            //or they removed their picture and want to edit their listing picture again)\r\n            //Upload cloudinary image\r\n\r\n            props.editProfile(formValues, null, null);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        props.fetchProfile();\r\n    }, []);\r\n\r\n    const renderContent = () => {\r\n        if (props.errors.data?.error) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">\r\n                        {props.errors.data?.error}\r\n                    </h3>\r\n                </div>\r\n            );\r\n        } else if (props.profile.data) {\r\n            const { username, avatar_url } = props.profile.data.profile[0];\r\n            return (\r\n                <div className=\"profileContainer\">\r\n                    <div className=\"profileHeader\">\r\n                        <div className=\"profileHeaderAvatar\">\r\n                            <img\r\n                                src={avatar_url ? avatar_url : defaultAvatar}\r\n                                onError={(e: any) => {\r\n                                    e.target.src = defaultAvatar; // some replacement image\r\n                                }}\r\n                                alt=\"avatar\"\r\n                            />\r\n                        </div>\r\n                        <h1>{username}</h1>\r\n                    </div>\r\n                    <div className=\"profileTextAndFormWrap\">\r\n                        <h1 className=\"profileAboutTitle\">About</h1>\r\n                        <div className=\"profileTextWrap\">\r\n                            <p>\r\n                                Set your profile name and avatar. This will help\r\n                                other people identify you on the Steam\r\n                                Community.\r\n                            </p>\r\n                            <p>\r\n                                Your profile name and avatar represent you\r\n                                throughout Steam, and must be appropriate for\r\n                                all audiences.\r\n                            </p>\r\n                        </div>\r\n                        <EditProfileForm\r\n                            onSubmit={onSubmitEditProfile}\r\n                            cloudinaryImage={avatar_url}\r\n                            initialValues={{\r\n                                username: username,\r\n                            }}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n    return <React.Fragment>{renderContent()}</React.Fragment>;\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        profile: state.profile,\r\n        errors: state.errors,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    fetchProfile,\r\n    editProfile,\r\n})(requireAuth(Profile));\r\n","import { ActionTypes } from \"./types\";\r\nimport axios from \"./axiosConfig\";\r\nimport { Dispatch } from \"redux\";\r\n\r\nimport { SERVER_ERROR_MESSAGE } from \"../constants\";\r\nimport { GamesErrorAction } from \"./games\";\r\n\r\nexport interface FetchProfileAction {\r\n    type: ActionTypes.FETCH_PROFILE;\r\n    payload: ProfileResponse;\r\n}\r\n\r\nexport interface EditProfileAction {\r\n    type: ActionTypes.EDIT_PROFILE;\r\n    payload: ProfileResponse;\r\n}\r\n\r\nexport interface Profile {\r\n    username: string;\r\n    avatar_url: string;\r\n}\r\nexport interface ProfileResponse {\r\n    profile: Profile[];\r\n}\r\n\r\nexport interface CloudinaryImagePath {\r\n    cloudinaryImagePath: string;\r\n}\r\nexport interface CloudinaryImageDelete {\r\n    result: string;\r\n}\r\n\r\nexport const fetchProfile = () => async (dispatch: Dispatch) => {\r\n    try {\r\n        const response = await axios.get<ProfileResponse>(`/api/profile`);\r\n        dispatch<FetchProfileAction>({\r\n            type: ActionTypes.FETCH_PROFILE,\r\n            payload: response.data,\r\n        });\r\n    } catch (error) {\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n\r\nexport const editProfile = (\r\n    formValues: any,\r\n    cloudinaryPublicId: string | null,\r\n    existingCloudinaryImagePath: string | null\r\n) => async (dispatch: Dispatch) => {\r\n    //Distributed transaction takes place here, if an error occurs in uploading to one of the storage systems,\r\n    // we haven't handle it (i.e an image may be uploaded, but the data failed to be inserted; the image wouldn't be deleted)\r\n\r\n    //Form data is used to POST a file (image in our case)\r\n    //https://stackoverflow.com/questions/43013858/how-to-post-a-file-from-a-form-with-axios\r\n    try {\r\n        let cloudinaryImagePath = {};\r\n\r\n        if (\r\n            formValues.image instanceof FileList &&\r\n            cloudinaryPublicId != null\r\n        ) {\r\n            //A cloudinary image already exists, ovveride current cloudinary image\r\n            let formData = new FormData();\r\n            formData.append(\"image\", formValues.image[0]);\r\n            //overrides current image with the current publicid\r\n            const imagePathResponse = await axios.put<CloudinaryImagePath>(\r\n                `/api/edit-image/${cloudinaryPublicId}`,\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        \"Content-Type\": \"multipart/form-data\",\r\n                    },\r\n                }\r\n            );\r\n            cloudinaryImagePath = imagePathResponse.data;\r\n        } else if (\r\n            formValues.image instanceof FileList &&\r\n            cloudinaryPublicId === null\r\n        ) {\r\n            //cloudinary image does not exist because user did not create a listing with an image or\r\n            //has removed an image in their lisitng\r\n\r\n            let formData = new FormData();\r\n            formData.append(\"image\", formValues.image[0]);\r\n\r\n            const imagePathResponse = await axios.post<CloudinaryImagePath>(\r\n                \"/api/upload-image\",\r\n                formData,\r\n                {\r\n                    headers: {\r\n                        \"Content-Type\": \"multipart/form-data\",\r\n                    },\r\n                }\r\n            );\r\n\r\n            cloudinaryImagePath = imagePathResponse.data;\r\n        } else if (\r\n            existingCloudinaryImagePath &&\r\n            Object.keys(cloudinaryImagePath).length === 0\r\n        ) {\r\n            cloudinaryImagePath = {\r\n                cloudinaryImagePath: existingCloudinaryImagePath,\r\n            };\r\n        } else if (formValues.image === null) {\r\n            //User wants to remove image\r\n            await axios.delete<CloudinaryImageDelete>(\r\n                `/api/delete-image/${cloudinaryPublicId}`\r\n            );\r\n        }\r\n\r\n        const response = await axios.patch<ProfileResponse>(\r\n            `/api/edit-profile`,\r\n            {\r\n                ...cloudinaryImagePath,\r\n                ...formValues,\r\n            }\r\n        );\r\n\r\n        dispatch<EditProfileAction>({\r\n            type: ActionTypes.EDIT_PROFILE,\r\n            payload: response.data,\r\n        });\r\n        alert(\"Success! Profile is updated.\");\r\n    } catch (error) {\r\n        console.log(\"error\", error);\r\n        alert(SERVER_ERROR_MESSAGE);\r\n        dispatch<GamesErrorAction>({\r\n            type: ActionTypes.GAME_ERROR,\r\n            payload: { error: SERVER_ERROR_MESSAGE },\r\n        });\r\n    }\r\n};\r\n","import React, { useEffect, useState, useRef } from \"react\";\r\nimport {\r\n    fetchGames,\r\n    fetchDiscountedGames,\r\n    Game,\r\n    fetchGamesByKeyword,\r\n} from \"../actions\";\r\nimport { connect } from \"react-redux\";\r\nimport { StoreState } from \"../reducers\";\r\nimport { GamesStateResponse } from \"../reducers/gamesReducer\";\r\nimport { ErrorStateResponse } from \"reducers/errorReducer\";\r\nimport Loading from \"./Loading\";\r\nimport history from \"../browserHistory\";\r\nimport moment from \"moment\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport queryString from \"query-string\";\r\nimport _ from \"lodash\";\r\nimport Searchbar from \"./Searchbar\";\r\nimport anime from \"animejs/lib/anime.es.js\";\r\nimport CartAndSearchbar from \"./CartAndSearchbar\";\r\ninterface SearchProps {\r\n    games: GamesStateResponse;\r\n    discountedGames: GamesStateResponse;\r\n    errors: ErrorStateResponse;\r\n    fetchGames(): void;\r\n    fetchDiscountedGames(): void;\r\n    fetchGamesByKeyword(query: string | string[]): void;\r\n}\r\n\r\nconst Search: React.FC<SearchProps> = (props) => {\r\n    //For Query Strings:\r\n    const { search } = useLocation();\r\n    const queryValues = queryString.parse(search);\r\n\r\n    const [hoverData, setHoverData] = useState(1);\r\n    let localCart = localStorage.getItem(\"cart\");\r\n    useEffect(() => {\r\n        if (queryValues.q) {\r\n            props.fetchGamesByKeyword(queryValues.q);\r\n        } else if (queryValues.specials !== undefined) {\r\n            props.fetchDiscountedGames();\r\n        } else {\r\n            props.fetchGames();\r\n        }\r\n\r\n        //Search is used in the case the person presses a back button after an empty search\r\n    }, [search]);\r\n\r\n    useEffect(() => {\r\n        if (props.discountedGames.data) {\r\n            if (props.discountedGames.data.games.length > 0)\r\n                setHoverData(props.discountedGames.data.games[0].game_id);\r\n        } else if (props.games.data)\r\n            if (props.games.data.games.length > 0)\r\n                setHoverData(props.games.data.games[0].game_id);\r\n    }, [props.games.data, props.discountedGames.data]);\r\n\r\n    const renderScreenshotsForGame = (gameId: number) => {\r\n        let game = _.filter(props.games.data?.games, {\r\n            game_id: gameId,\r\n        });\r\n\r\n        if (game.length === 0)\r\n            game = _.filter(props.discountedGames.data?.games, {\r\n                game_id: gameId,\r\n            });\r\n        let maxScreenshotToShow = 1;\r\n        if (game.length > 0)\r\n            return game[0].screenshots.map((screenshot, index) => {\r\n                if (index < maxScreenshotToShow)\r\n                    return (\r\n                        <img\r\n                            className={`searchScreenshotImage searchScreenshotImage${index}`}\r\n                            onLoad={() => {\r\n                                anime({\r\n                                    targets: `.searchScreenshotImage${index}`,\r\n                                    // Properties\r\n                                    // Animation Parameters\r\n                                    opacity: [\"0\", \"1\"],\r\n\r\n                                    duration: 750,\r\n                                    easing: \"easeOutQuad\",\r\n                                });\r\n                            }}\r\n                            key={index}\r\n                            src={screenshot}\r\n                            alt=\"preview\"\r\n                        ></img>\r\n                    );\r\n            });\r\n    };\r\n\r\n    const renderGenresForGameText = (gameId: number) => {\r\n        let filteredContent = _.filter(props.games.data?.games, {\r\n            game_id: gameId,\r\n        });\r\n        if (filteredContent.length === 0)\r\n            filteredContent = _.filter(props.discountedGames.data?.games, {\r\n                game_id: gameId,\r\n            });\r\n        if (filteredContent.length > 0)\r\n            return filteredContent.map((content, index) => {\r\n                return content.genres.map((genre, index) => {\r\n                    return (\r\n                        <p key={index} className=\"searchGameGenres\">\r\n                            {genre}\r\n                        </p>\r\n                    );\r\n                });\r\n            });\r\n    };\r\n\r\n    const renderChartGamePreview = (gameId: number) => {\r\n        let filteredContent = _.filter(props.games.data?.games, {\r\n            game_id: gameId,\r\n        });\r\n\r\n        if (filteredContent.length === 0)\r\n            filteredContent = _.filter(props.discountedGames.data?.games, {\r\n                game_id: gameId,\r\n            });\r\n\r\n        if (filteredContent.length > 0)\r\n            return (\r\n                <div\r\n                    className={`searchPreviewHover ${\r\n                        hoverData === gameId ? \"\" : \"hideSearchPreviewHover\"\r\n                    }`}\r\n                >\r\n                    <p className=\"searchGamePreviewTitle\">\r\n                        {filteredContent.map((content, index) => {\r\n                            return content.title;\r\n                        })}\r\n                    </p>\r\n\r\n                    <div className=\"chartGamePreviewScreenshots\">\r\n                        {renderScreenshotsForGame(gameId)}\r\n                        <div className=\"searchGameGenresWrap\">\r\n                            {renderGenresForGameText(gameId)}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            );\r\n    };\r\n\r\n    const renderPrice = (content: Game) => {\r\n        if (parseFloat(content.discount_percentage) > 0) {\r\n            return (\r\n                <div className=\"searchGameAdjustedPriceWrap\">\r\n                    <div className=\"searchGameDiscount\">\r\n                        -{parseFloat(content.discount_percentage) * 100}%\r\n                    </div>\r\n                    <div className=\"searchGamePriceTextWrap\">\r\n                        <p className=\"searchGamePriceStriked\">\r\n                            ${parseFloat(content.price).toFixed(2)}\r\n                        </p>\r\n                        <p className=\"searchGamePrice\">\r\n                            $\r\n                            {parseFloat(content.price_after_discount).toFixed(\r\n                                2\r\n                            )}\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            );\r\n        } else {\r\n            //no discount\r\n            return (\r\n                <p className=\"searchGamePrice\">\r\n                    ${parseFloat(content.price).toFixed(2)}\r\n                </p>\r\n            );\r\n        }\r\n    };\r\n\r\n    const renderChartGames = () => {\r\n        let contentToRender = props.games.data?.games;\r\n        if (queryValues.specials !== undefined) {\r\n            contentToRender = props.discountedGames.data?.games;\r\n        }\r\n        if (contentToRender) {\r\n            if (contentToRender.length > 0)\r\n                return contentToRender.map((content, index) => {\r\n                    return (\r\n                        <div\r\n                            key={index}\r\n                            className={`searchGameContainer ${\r\n                                hoverData === content.game_id\r\n                                    ? \"searchGameContainerToggled\"\r\n                                    : \"\"\r\n                            }`}\r\n                            onClick={() => {\r\n                                history.push(`game/${content.game_id}`);\r\n                            }}\r\n                            onMouseOver={() => {\r\n                                setHoverData(content.game_id);\r\n                            }}\r\n                        >\r\n                            <div className=\"searchGameImageAndTitleWrap\">\r\n                                <img\r\n                                    className={`searchGameImage searchGameImage${index}`}\r\n                                    src={content.cover_url}\r\n                                    onLoad={() => {\r\n                                        anime({\r\n                                            targets: `.searchGameImage${index}`,\r\n                                            opacity: [\r\n                                                {\r\n                                                    value: [0, 1],\r\n                                                    duration: 250,\r\n                                                    easing: \"easeOutQuad\",\r\n                                                },\r\n                                            ],\r\n                                        });\r\n                                    }}\r\n                                    alt=\"game\"\r\n                                ></img>\r\n                                <p className=\"searchGameTitle\">\r\n                                    {content.title}\r\n                                </p>\r\n                            </div>\r\n\r\n                            <div className=\"searchGameDateAndPriceWrap\">\r\n                                <p className=\"searchGameDate\">\r\n                                    {moment(content.release_date).format(\r\n                                        \"YYYY/MM/DD\"\r\n                                    )}\r\n                                </p>\r\n                                {renderPrice(content)}\r\n                            </div>\r\n                            {renderChartGamePreview(content.game_id)}\r\n                        </div>\r\n                    );\r\n                });\r\n            else {\r\n                return (\r\n                    <div className=\"noResultsWrap\">\r\n                        <p>There are no matches to your search. </p>\r\n                    </div>\r\n                );\r\n            }\r\n        }\r\n    };\r\n\r\n    const renderContent = () => {\r\n        if (props.errors.data?.error) {\r\n            return (\r\n                <div className=\"serverErrorContainer\">\r\n                    <h3 className=\"serverErrorText\">\r\n                        {props.errors.data?.error}\r\n                    </h3>\r\n                </div>\r\n            );\r\n        } else if (\r\n            props.games.data?.games ||\r\n            props.discountedGames.data?.games\r\n        ) {\r\n            // if (\r\n            //     props.games.data?.games.length === 0 ||\r\n            //     props.discountedGames.data?.games.length === 0\r\n            // ) {\r\n            //     return (\r\n            //         <React.Fragment>\r\n            //             <div className={`searchContainer`}>\r\n            //                 <CartAndSearchbar />\r\n\r\n            //                 <div className=\"searchColumnsWrap\">\r\n            //                     <div className=\"noResultsWrap\">\r\n            //                         <p>There are no matches to your search. </p>\r\n            //                     </div>\r\n            //                 </div>\r\n            //             </div>\r\n            //         </React.Fragment>\r\n            //     );\r\n            // }\r\n            return (\r\n                <React.Fragment>\r\n                    <div className={`searchContainer`}>\r\n                        <CartAndSearchbar />\r\n                        <div className=\"searchColumnsWrap\">\r\n                            <div className=\"searchGamesColumn\">\r\n                                {renderChartGames()}\r\n                            </div>\r\n\r\n                            {/* {renderChartGamePreview(hoverData)} */}\r\n                        </div>\r\n                    </div>\r\n                </React.Fragment>\r\n            );\r\n        } else {\r\n            return (\r\n                <div className=\"loadingCenter\">\r\n                    <Loading />\r\n                </div>\r\n            );\r\n        }\r\n    };\r\n\r\n    return <React.Fragment>{renderContent()}</React.Fragment>;\r\n};\r\n\r\nconst mapStateToProps = (state: StoreState) => {\r\n    return {\r\n        games: state.games,\r\n        discountedGames: state.discountedGames,\r\n        errors: state.errors,\r\n    };\r\n};\r\n\r\nexport default connect(mapStateToProps, {\r\n    fetchGames,\r\n    fetchDiscountedGames,\r\n    fetchGamesByKeyword,\r\n})(Search);\r\n","import React, { Fragment } from \"react\";\r\nimport { Route, Switch } from \"react-router-dom\";\r\nimport Home from \"./Home\";\r\nimport Header from \"./Header\";\r\nimport GameInfo from \"./GameInfo\";\r\nimport Cart from \"./Cart\";\r\nimport Register from \"./Register\";\r\nimport SignIn from \"./SignIn\";\r\nimport Profile from \"./Profile\";\r\nimport Search from \"./Search\";\r\nconst Routes: React.FC<{}> = () => {\r\n    return (\r\n        <React.Fragment>\r\n            <Header />\r\n            <Switch>\r\n                <Route path=\"/\" exact component={Home} />\r\n                <Route path=\"/game/:gameId\" exact component={GameInfo} />\r\n                <Route path=\"/cart\" exact component={Cart} />\r\n                <Route path=\"/signin\" exact component={SignIn} />\r\n                <Route path=\"/register\" exact component={Register} />\r\n                <Route path=\"/profile\" exact component={Profile} />\r\n                <Route path=\"/search\" exact component={Search} />\r\n            </Switch>\r\n        </React.Fragment>\r\n    );\r\n};\r\n\r\nexport default Routes;\r\n","import React from \"react\";\r\nimport { Router } from \"react-router-dom\";\r\nimport history from \"../browserHistory\";\r\nimport Routes from \"./Routes\";\r\nconst App: React.FC<{}> = () => {\r\n    history.listen((_) => {\r\n        window.scrollTo(0, 0);\r\n    });\r\n    return (\r\n        <Router history={history}>\r\n            <Routes />\r\n        </Router>\r\n    );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./components/App\";\nimport \"./css/main.css\";\nimport Root from \"./Root\";\nReactDOM.render(\n    <React.StrictMode>\n        <Root>\n            <App />\n        </Root>\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}